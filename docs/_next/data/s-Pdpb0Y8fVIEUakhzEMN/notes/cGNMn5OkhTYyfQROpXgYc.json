{"pageProps":{"note":{"id":"cGNMn5OkhTYyfQROpXgYc","title":"Streams","desc":"Standard Streams","updated":1634670021274,"created":1615072086799,"custom":{},"fname":"unix.streams","type":"note","vault":{"fsPath":"../main/tech","name":"tech"},"contentHash":"a68e7a0757e06060a609deb40cfe9718","links":[{"type":"wiki","from":{"fname":"unix.streams","id":"cGNMn5OkhTYyfQROpXgYc","vaultName":"tech"},"value":"memory.buffer","alias":"Buffer","position":{"start":{"line":12,"column":55,"offset":1693},"end":{"line":12,"column":79,"offset":1717},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"memory.buffer"}}],"anchors":{"21":{"type":"header","text":"2>&1","value":"21","line":57,"column":0,"depth":4},"what-is-it":{"type":"header","text":"What is it?","value":"what-is-it","line":8,"column":0,"depth":1},"why-use-streams-over-other-data-handling-methods":{"type":"header","text":"Why use streams over other data handling methods?","value":"why-use-streams-over-other-data-handling-methods","line":20,"column":0,"depth":2},"standard-streams":{"type":"header","text":"Standard Streams","value":"standard-streams","line":24,"column":0,"depth":2},"file-descriptor-fd":{"type":"header","text":"File Descriptor (FD)","value":"file-descriptor-fd","line":30,"column":0,"depth":3},"stdin":{"type":"header","text":"STDIN","value":"stdin","line":40,"column":0,"depth":3},"stdout":{"type":"header","text":"STDOUT","value":"stdout","line":47,"column":0,"depth":3},"stderr":{"type":"header","text":"STDERR","value":"stderr","line":51,"column":0,"depth":3},"special-file":{"type":"header","text":"Special File","value":"special-file","line":80,"column":0,"depth":2}},"children":[],"parent":"jOmhZ8ovLYTPbpM1vqSDx","data":{}},"body":"<h1 id=\"streams\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#streams\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Streams</h1>\n<h1 id=\"what-is-it\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#what-is-it\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>What is it?</h1>\n<ul>\n<li>Streams are used to read or write input into output sequentially</li>\n<li>What makes streams unique, is that instead of a program reading a file into memory all at once like in the traditional way, streams read chunks of data piece by piece, processing its content without keeping it all in memory.\n<ul>\n<li>This makes streams really powerful when working with large amounts of data, for example, a file size can be larger than your free memory space, making it impossible to read the whole file into the memory in order to process it. That’s where streams come to the rescue!</li>\n</ul>\n</li>\n<li>Streams are a way to handle reading/writing files, network communications, or any kind of end-to-end information exchange in an efficient way</li>\n<li>streams are not only about working with media (ie. streaming movies/music) or big data. They also give us the power of ‘composability’ in our code\n<ul>\n<li>it’s possible to compose powerful pieces of code by piping data to and from other smaller pieces of code, using streams.</li>\n</ul>\n</li>\n</ul>\n<p>it is best to think of a Stream as an established connection to some input, some output, or both. A lot of things can muddy this definition of stream, but that is the fundamental idea... A connection to some input or some output or some I/O endpoint that can handle both input and output.</p>\n<ul>\n<li>ex. one might have a readable stream to a file that one wants to get the contents of. In this case the stream is an input connection to the file. The input stream doesn't hold the contents of the file, but rather holds the connection to the file. It is up to the program to then read and store the contents (assuming that is the desired operation).\n<ul>\n<li>One place a stream might store the content is in a <a href=\"/Digital-Garden/notes/6DN20aQUJntqI2PjUMAgZ\">Buffer</a> object (if we were using Node).</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"why-use-streams-over-other-data-handling-methods\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#why-use-streams-over-other-data-handling-methods\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Why use streams over other data handling methods?</h2>\n<ol>\n<li>Memory efficiency: you don’t need to load large amounts of data in memory before you are able to process it</li>\n<li>Time efficiency: it takes significantly less time to start processing data as soon as you have it, rather than having to wait with processing until the entire payload has been transmitted</li>\n</ol>\n<h2 id=\"standard-streams\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#standard-streams\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Standard Streams</h2>\n<ul>\n<li>communication channels between a program and its environment (ie. the host that executes it).</li>\n<li>stdin and stdout are inherited from the parent process, though it can be redirected.</li>\n<li>anal: The Services menu, as implemented on Mac OSX, is analogous to standard streams. On this operating systems, graphical applications can provide functionality through a systemwide menu that operates on the current selection in the GUI, no matter in what application.</li>\n<li>The correct way to think about redirection is that one redirects output to a file (<code>></code>), and one redirects a file's contents to stdout (<code>&#x3C;</code>).</li>\n</ul>\n<h3 id=\"file-descriptor-fd\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#file-descriptor-fd\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>File Descriptor (FD)</h3>\n<ul>\n<li>A FD is a number that uniquely identifies an open file in a computer's operating system\n<ul>\n<li>A file can be thought of simply as a resource. In other words, something that provides data. A file as we know it fulfills this definiion, but also consider that streams do as well. Therefore, a file in this sense is more general, and simply stands for \"a resource that provides data\".</li>\n</ul>\n</li>\n<li>A FD gives us the means to access a file, or perhaps more interestingly, a standard stream\n<ul>\n<li>therefore an FD is a reference to the standard stream</li>\n</ul>\n</li>\n<li>ex. The file descriptor for standard input has id = 0</li>\n</ul>\n<p>A file descriptor is associated with an input/output resource, which would include regular files, network sockets, and pipes</p>\n<!-- - except for redirections with `<&`, any time we do a redirection, -->\n<h3 id=\"stdin\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#stdin\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>STDIN</h3>\n<p>Standard input is a stream from which a program reads its input data.</p>\n<ul>\n<li>the program requests this data transfer by using the <em>read</em> operation</li>\n<li>ex. the keyboard is the stdin to a text editor, and also to an interactive shell.</li>\n</ul>\n<p>When we redirect with <code>&#x3C;</code>, implicitly we are running <code>1&#x3C;</code></p>\n<h3 id=\"stdout\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#stdout\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>STDOUT</h3>\n<p>Standard output is a stream to which a program writes its output data.</p>\n<ul>\n<li>the program requests this data transfer by using the <em>write</em> operation</li>\n</ul>\n<h3 id=\"stderr\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#stderr\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>STDERR</h3>\n<ul>\n<li>having 2 different output streams is analogous to functions that return a pair of values</li>\n<li>The terminal that executes the program is the default stderr destination.\n<ul>\n<li>sometimes stdout is redirected, so the fact that stdout and stderr are different streams allows stderr to continue outputting its streams elsewhere than stdout.\n<ul>\n<li>ex. when we pipe the output of one program into another. Imagine we were piping data between different hosts. If there was a single stream, it would get passed along the chain. Now with stderr, we are able to see stderr in the executing terminal and trace down the location of the logs to find the offending program.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"21\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#21\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>2>&#x26;1</h4>\n<ul>\n<li>\n<p>we can append <code>2>&#x26;1</code> on any unix command to redirect stderr to the same destination as stdout</p>\n<ul>\n<li>often, we see <code>2>/dev/null</code>, which means \"redirect stderr to <code>/dev/null</code>, a blackhole\"</li>\n<li>ex. the <strong>find</strong> utility displays both stdout and stderr to the terminal. If we append the command with blackhole redirection, then only the stdout will be shown.</li>\n</ul>\n</li>\n<li>\n<p>placement of <code>2>&#x26;1</code> is critical to determining its meaning. Consider the following variants of the same command:</p>\n</li>\n<li>\n<p><code>|&#x26;</code> is shorthand for <code>2>&#x26;1 |</code></p>\n</li>\n<li>\n<p><code>echo hello > stuff.txt</code> === <code>echo hello 1> stuff.txt</code>.</p>\n<ul>\n<li>ie. the <code>1</code> (stdout) is implicit. we are saying \"redirect the stdout of the echo command to <code>stuff.txt</code>\"</li>\n</ul>\n</li>\n<li>\n<p><code>0</code> means stdin, <code>1</code> means stdout, <code>2</code> means stderr</p>\n</li>\n<li>\n<p>in the context of redirections, <code>&#x26;</code> means \"the following is a file descriptor (ie. the type of standard stream) and not a filename\". Without <code>&#x26;</code>, we would be writing to a file named <code>1</code></p>\n</li>\n</ul>\n<pre><code>// stderr goes to terminal, and nothing gets written to outfile\ncommand_does_not_exist 2>&#x26;1 > outfile\n\n// stderr goes to stdout, and gets written into outfile\ncommand_does_not_exist > outfile 2>&#x26;1\n</code></pre>\n<p>In the first example, when we encountered <code>2>&#x26;1</code>, we were saying \"pipe all stderr into the same stream as stdout\". At this point in the command, stdout was simply the terminal (spec: since that is the default stdout of a command). Since stdout was the terminal at this point, we also declared that stderr should point to the terminal. In this way, <code>2>&#x26;1</code> doesn't cause stderr to equal stdout. It merely points it the same way stdout is facing. Nothing is stopping stdout from changing direction later on, which is exactly what happens. When we write <code>> outfile</code>, we are declaring that stdout should be <code>outfile</code>.</p>\n<p>In the second example, we see that by the time we evaluate <code>2>&#x26;1</code>, stdout is <code>outfile</code>. This causes stderr to also point at <code>outfile</code>, hence is why in this example, the file is populated with <code>command not found: command_does_not_exist</code></p>\n<ul>\n<li>the <code>2>&#x26;1</code> operator points file descriptor 2 to the same target file descriptor 1 is pointing at.</li>\n</ul>\n<h2 id=\"special-file\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#special-file\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Special File</h2>\n<ul>\n<li>spec: In Unix, the most comfortable means for programs to communicate is via files. It is easy to set up standard streams with files, so it is an appropriate level of abstraction to communicate with the Unix system. For this reason, Unix has this concept of a <em>special file</em>, which is a file that represents something that is not a file at all.</li>\n<li>ex. consider a partition of a hard drive that \"exists\" in the FS at <code>/dev/sda3</code>. In reality, this is just how the filesystem \"knows of\" the partition. The <code>sda3</code> file enables the partition to communicate with the Unix system via standard streams.</li>\n</ul>","noteIndex":{"id":"olZIVfSs2uLLr3BppFh4K","title":"Root","desc":"","updated":1618676699718,"created":1615482407722,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"../main/tech","name":"tech"},"contentHash":"777fb4dab9bcf63cbfe772245d7e4871","links":[],"anchors":{"digital-garden":{"type":"header","text":"Digital Garden","value":"digital-garden","line":8,"column":0,"depth":1}},"children":["zFMjbn3xihVNHjUIdZCD1","IK6NOKemuDjhfstJBovKL","RS8qp1GxwtiJopCUHTTtq","ZaTr28eWk1DrXOEsc1YVb","Vi0WYVLZunVM9iR8XZJn3","ngAbg7gluvbt1bY1UIRsi","RCPPXSakm5TvKka8kOmVp","MPx8ykTP57I40WTZvTP7f","ZU5WmdTG1bHoE8RcmZXZG","jqWiyYJff92RjXuUQt9PQ","KihijM8OQvZ4pASkkhqzL","F9vyqvls3OBCujtukqKhy","facc2b01-755a-409f-99f6-57bef2d1501f","m5ov42Vm6mR7RQWTvl1NW","YYt62mSW964cwb5nP0hva","PZxxZ4iESzSlbbHJKxuAZ","UDu62Pa6BaRqlG8uGoMhy","nMCtMXVvjBsJk3iw1zoIO","ANfx9Z4a6ZA0uJuSHtbIJ","BkG557LKUYbH1DnxprEVT","1TaH8zDTM98FZ9SYaeXLM","dc79799f-a55d-48ab-a8be-c48adb1b19c0","f6feef57-b8f5-451f-a09a-7b63f6a07183","4sz47Y0LKs1Si73rWtyyh","5a9fb1df-478e-4687-9be0-5cb97e61ec57","1374e9e9-1cbc-4e1f-b1ca-66b8569533dd","f529cc34-aba0-45ca-ad7e-02ddda318941","0zcauha3il2NqtxZazIo7","9bbd6f68-03b2-41f4-92e4-2ca313e8b450","5a2ab598-fa7e-4471-8bda-9f5831b679ae","uV6w4mZPoohWyZV4Xaad0","RgE0mZLaUjPftFPZsiAoe","mytCOts26Pidush65tdRW","fwUzxfLSPMH1eL8oBoLWx","TbW7PM9bg1y5TGkiWwQ8b","xiSIDeEtIc8X0lpUQlppI","0jxgntiLNHWFuCbzqtFGF","GkdMprLUe4QQULBxmGN6V","4SYc6v5hxY5g6Ip6kjpwO","fqVQpS9FBiXgKsZX3R3sJ","L5JUZlGAGvTxrsEBB7DY8","963c4b54-02bd-4943-a15f-52cf59ffd0f4","TeTedoeS2LdHPR632eCpM","e65188a1-177e-4ab2-99f9-75f85d537621","fajYnbVhCRDi74xn0H30R","bArGdGwqo3iFkyKMyE7qR","4Dcp7gbEVoLLgfu7bXFai","5d700782-fb81-416e-83f9-5dd88260e350","zubgzhNFE6KlTgXcjTz6O","8lpdfWa0cbSq1XJQbcYcY","17I8ZksXvqCH1mRtZDjHp","kF916Ow84qpJJeMRkWMIo","tMLkLcrIHHBz56xVmBLkP","CSePBQ6q7qhowKESqVwt7","laZ4OfLhZNK1Kuy6GaWUr","z5IJblOknQhMzZ5QZh4ye","N36FHxfxzwJfxDY3miWyX","3bb25f58-2b50-4fa3-af55-48ea9f88a081","aOqNcxZh8qN4MoBJcvGTc","u93Rz4fEWGu6VBR30Zraf","9hjMHnKvYT4jLKvuDSXaV","LgW7mTIALODoXc54B3p6S","UYPxfHBFWX7fb6hHU5bB6","qxSOd6SPN8qf9ZUojVFDX","WQoMTf6VXBaxCgksXAVsj","2Mw4XgfyCHXHNOX5yoCIY","UFrwsXzC1yr7Ge8FF8Vbo","a8edc4ac-028b-40ec-872a-e4a005b04b2a","0XJqmcdtcMZu66glBI5O8","lK8r8BXS4ThiUTe4xKIZe","93de42ca-53ea-460a-baa7-b9ec5c47cb1e","Rxs2jaGpdFzqYtP7lAJFJ","aO8W81Z0PyIb6Hs7nOHPW","I01hENHnh8Tqu3Ok8sLzG","evqsPNutOaZ8hcBCqxFQu","zhhxcjZUHdU8uRLwGb9Zh","G1aFACZB2ooWGMGwyd3ZW","YWy1C4tgoaCcw1m8JJsr7","Szj3o5iaNxPpesiCqwrbu","XhvCDW3fIw6h6MhY5ticq","Q70g7SusFZBQXzkuQifv4","AzfWDH3wp7jFpL2EYxBcW","y0fwpZ9qMqirsLiFyOciU","ZF8xj8wwDUqKlrwTrCFZ1","tAJvhqhdfyZZa87QHq1TU","4hRmipi8lxpBLyzWu5JVB","iTg0C7QjvnmqBZeEigJNs","3babc3d2-79ae-470a-9c06-ab8bba2e684e","bF3UsMFya3fMeXWDspVov","ULkfbL9WpktbVYnzhl6Jw","PpNOO8JYWe6dM8wruSa7x","di40pCxDn7IiqE8lFdD46","rmW0mkerqV35I8QPji6lM","3IFIK1ByzeIxZCByryGLN","iImkYAKfkw3beAl6pLbDn","tho65KN0ZpjQlVvP1fEzM","ecDe8DNWrkeQTwpTEvHje","Yqhdd9mSJGN7OJOeyoSD2","NEhsoOfR7J6o01ielAuUm","Ws5tah8tpeyn9tK8VBTg8","Bqpifx2HX3vjLhX9yvhTV","gWAg15uBJgkS2B0wcpMAa","l7V3v2ep1YdDCt7DOr7Ci","yM2PJBdqJnHpD63cPA6sW","qn0bre7eLbi3QMbCfWkUi","fSu0KxFL41IRouotqmbHs","0gtg24Mj1a1bQFPRGQNlO","7iQPBMltLPLbFEz2qbjPu","yoh4pwoXcfELInGKRdYf6","dCGCWXgAmiOZXbdULT1m6","jMavlje07sNa6hSEIE8WA","Xxm0JE4dKHxrQAaZfzvxD","PAEBZCyFBZJyR7OoMZ41E","PQ6km8RgRCuyICBPOYz8f","2bhftt8rGuxYu4pFgNqru","hjYIZpHQWuXfeEoGeJEKW","K2M9bQqVq2eQfm29eslKL","X8obW1iKwYsvNgKWGyCzy","yJwSC7hqYIezTFHf5i0Ev","c4Z7ETcOHUILRMH32Sfjw","qiR6dIu857b9M9kTqjOyK","8vflbCVkwZtYcqdDDTNAz","Ku1OgHMhELajzo61Gx7ye","LUrfhDWo8wuwZu7CN9TV8","osu6JGOnvXJ5gt3tpqWZY","1a6173cd-cf13-4b34-a522-8350bf9a364f","ZgCUp366YrF2Tyky2NT73","S2sBltrPfd8a7ICuD7CuH","oWCuBXOg6JWfZzjmKxmNl","jOmhZ8ovLYTPbpM1vqSDx","FraC6xzLy1ei91l1ICyc9","6ceBas2RE9Q4787GDngH7","734cd78d-0bc9-426b-803d-1efc84dfffe5","k4Bb09px6r0FxIRs49SXV","oaG3H1S9IUBO644nGZigu","Ka7agQJkUMRSWN0uFdkWK","si3z090WsiLasMhJBa1Az","ljKAVERmdEiKLK9hXGKBm","LIcuGYV0DDt1VWbvH6Sed","MgUSrpNCIwDOW4fX3vPOF","bZumdyapJ2H0wWWOmJ45i","QHXEIyeZGIGMVi5Q52UWI","i5Fya3Vzzm0rBT0ctByuo"],"parent":null,"data":{},"body":"\n# Digital Garden\n\nThis Wiki of Personal Information is organized according to domains and their\nsub-domains, along with specific implementation of those domains.\n\nFor instance, Git itself is a domain. Sub-domains of Git, would be `commit`,\n`tags`, `reflog` etc. implementations of each of those could be `cli`, `strat`\n(strategies), `inner` etc.\n\nThe goal of the wiki is to present data in a manner that is from the perspective\nof a querying user. Here, a user is a programmer wanting to get key information\nfrom a specific domain. For instance, if a user wants to use postgres functions\nand hasn't done them in a while, they should be able to query\n`postgres.functions` to see what information is available to them.\n\nThis wiki has been written with myself in mind. While learning each of these\ndomains, I have been sensitive to the \"aha\" moments and have noted down my\ninsights as they arose. I have refrained from capturing information that I\nconsidered obvious or otherwise non-beneficial to my own understanding.\n\nThe ability I hope to gain from this wiki is the ability to step away from any\ngiven domain for a long period of time, and be able to be passably useful for\nwhatever my goals are within a short period of time. Of course, this is all\nvague sounding, and really depends on the domain, along with the ends I am\ntrying to reach.\n\nTo achieve this, the system should be steadfast to:\n- be able to put information in relatively easily, without too much thought\n\trequired to make that determination.\n- be able to extract the information that we need, meaning there is a\n\thigh-degree in confidence in the location of the information. The idea is\n\tthat information loses a large amount of its value when it is unfindable.\n\tTherefore, a relatively strict ideology should be used when determining\n\twhere a piece of information belongs.\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":3,"useFMTitle":true,"useNoteTitleForLink":true,"noLegacyNoteRef":true,"mermaid":true,"useKatex":true,"dev":{"enablePreviewV2":true},"site":{"assetsPrefix":"/Digital-Garden","siteUrl":"https://tycholiz.github.io","copyAssets":true,"siteHierarchies":["root"],"siteRootDir":"docs","usePrettyRefs":true,"title":"Dendron","description":"Publishable tech notes","duplicateNoteBehavior":{"action":"useVault","payload":["tech"]},"siteLastModified":true,"gh_edit_branch":"main","usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_edit_link":true,"gh_edit_link_text":"Edit this page on GitHub","gh_root":"docs/","gh_edit_view_mode":"edit","writeStubs":true,"siteIndex":"root"},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{}},"workspace":{"dendronVersion":"0.67.1","vaults":[{"fsPath":"../main/tech","name":"tech"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"enableUserTags":true,"enableHashTags":true},"usePrettyRefs":true}},"__N_SSG":true}