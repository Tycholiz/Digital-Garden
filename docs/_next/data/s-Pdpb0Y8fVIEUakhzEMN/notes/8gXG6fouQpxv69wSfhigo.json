{"pageProps":{"note":{"id":"8gXG6fouQpxv69wSfhigo","title":"Gateway","desc":"","updated":1640029791711,"created":1637707557822,"custom":{},"fname":"general.patterns.gateway","type":"note","vault":{"fsPath":"../main/tech","name":"tech"},"contentHash":"130ba10a1a27ec37b63a95286eeb53ec","links":[{"type":"wiki","from":{"fname":"general.patterns.gateway","id":"8gXG6fouQpxv69wSfhigo","vaultName":"tech"},"value":"general.principles.DDD.bounded-context","alias":"Bounded Contexts","position":{"start":{"line":11,"column":52,"offset":947},"end":{"line":11,"column":111,"offset":1006},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"general.principles.DDD.bounded-context"}},{"type":"wiki","from":{"fname":"general.patterns.gateway","id":"8gXG6fouQpxv69wSfhigo","vaultName":"tech"},"value":"testing.test-double","alias":"Test Double","position":{"start":{"line":44,"column":54,"offset":3816},"end":{"line":44,"column":89,"offset":3851},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"testing.test-double"}},{"from":{"fname":"general.patterns.sink","vaultName":"tech"},"type":"backlink","position":{"start":{"line":5,"column":37,"offset":177},"end":{"line":5,"column":73,"offset":213},"indent":[]},"value":"general.patterns.gateway"}],"anchors":{"the-problem":{"type":"header","text":"The problem","value":"the-problem","line":21,"column":0,"depth":3},"pros":{"type":"header","text":"Pros","value":"pros","line":31,"column":0,"depth":3},"cons":{"type":"header","text":"Cons","value":"cons","line":40,"column":0,"depth":3},"connection-object":{"type":"header","text":"Connection Object","value":"connection-object","line":45,"column":0,"depth":3},"testing":{"type":"header","text":"Testing","value":"testing","line":54,"column":0,"depth":4},"api-gateway":{"type":"header","text":"API Gateway","value":"api-gateway","line":66,"column":0,"depth":3},"backends-for-frontends":{"type":"header","text":"Backends for Frontends","value":"backends-for-frontends","line":76,"column":0,"depth":4},"e-resources":{"type":"header","text":"E Resources","value":"e-resources","line":80,"column":0,"depth":1}},"children":[],"parent":"37d21937-a6a6-4ec9-a37f-f8df6425006f","data":{}},"body":"<h1 id=\"gateway\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#gateway\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Gateway</h1>\n<p>A gateway is an object that encapsulates access to an external system or resource. It is therefore an abstraction of the APIs that our application accesses. Thus, all the benefits that an abstraction typically provides apply here.</p>\n<ul>\n<li>A gateway is typically a simple wrapper. We look at what our code needs to do with the external system and construct an interface that supports that clearly and directly.</li>\n</ul>\n<p><img src=\"/Digital-Garden/assets/images/2021-12-14-14-25-34.png\"></p>\n<p>The gateway acts on terms that our system uses. It allows access to data sources, which may be queried in varying ways. The gateway takes all of these odd endpoints and ties them up into a nice little bow that can provide a unified interface that is ready to be queried.</p>\n<p>Gateways should only include logic that supports this translation between domestic and foreign concepts. Any logic that builds on that should be in clients of the gateway.</p>\n<p>The notion of a gateway fits well with that of the <a href=\"/Digital-Garden/notes/eJh8ewMkDq2LpJPqC6fX8\">Bounded Contexts</a></p>\n<ul>\n<li>use a gateway when dealing with something in a different context. The gateway handles the translation between the foreign context and your own.\n<ul>\n<li>The gateway is a way to implement an Anticorruption Layer</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"the-problem\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#the-problem\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>The problem</h3>\n<p>Usually we depend on third party APIs to build out our applications. These interfaces often seem awkward from the context of our software</p>\n<ul>\n<li>The API may use different types, require strange arguments, combine fields in ways that don't make sense in our context. Dealing with such an API can result in jarring mismatches whenever its used.</li>\n</ul>\n<p>Use a gateway whenever there is a need to access some external software and there is any awkwardness in that external element.</p>\n<ul>\n<li>Rather than let the awkwardness spread through the code, contain it to a single place in the gateway.</li>\n</ul>\n<p>The question we have to ask ourselves when considering whether or not to make a gateway is \"do we wish to isolate ourselves from the underlying platform?\"</p>\n<ul>\n<li>In many cases the platform's facilities are so pervasive that it's not worth going through the effort of wrapping it in a gateway.</li>\n</ul>\n<h3 id=\"pros\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#pros\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Pros</h3>\n<ul>\n<li>Insulates the clients from how the application is partitioned into microservices</li>\n<li>Insulates the clients from the problem of determining the locations of service instances</li>\n<li>Provides the optimal API for each client</li>\n<li>Reduces the number of requests/roundtrips. For example, the API gateway enables clients to retrieve data from multiple services with a single round-trip. Fewer requests also means less overhead and improves the user experience. An API gateway is essential for mobile applications.</li>\n<li>Simplifies the client by moving logic for calling multiple services from the client to API gateway</li>\n<li>Translates from a “standard” public web-friendly API protocol to whatever protocols are used internally</li>\n<li>The API gateway pattern has some drawbacks:</li>\n</ul>\n<h3 id=\"cons\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#cons\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Cons</h3>\n<ul>\n<li>Increased complexity - the API gateway is yet another moving part that must be developed, deployed and managed</li>\n<li>Increased response time due to the additional network hop through the API gateway - however, for most applications the cost of an extra roundtrip is insignificant.</li>\n</ul>\n<h3 id=\"connection-object\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#connection-object\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Connection Object</h3>\n<p>It's often useful to add a connection object to the basic structure of the gateway. The connection is a simple wrapper around the call to the foreign coded.</p>\n<ul>\n<li>The gateway translates its parameters into the foreign signature, and calls the connection with that signature. The connection then just calls the foreign API and returns its result. The gateway finishes by translating that result to a more digestible form.</li>\n<li>The connection can be useful in two ways.\n<ol>\n<li>Firstly it can encapsulate any awkward parts of the call to the foreign code, such as the manipulations needed for a REST API call.</li>\n<li>Secondly it acts as a good point for inserting a <a href=\"/Digital-Garden/notes/965AqO8bdqbS0Et9bKsUO\">Test Double</a>.</li>\n</ol>\n</li>\n</ul>\n<p>The connection object is where we make the HTTP request.</p>\n<h4 id=\"testing\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#testing\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Testing</h4>\n<p>Using a gateway can make a system much easier to test by allowing the test harness to stub out the gateway's connection object.</p>\n<ul>\n<li>particularly important for gateways that access remote services, as it can remove the need for a slow remote call\n<ul>\n<li>use a gateway here, even if the external API is otherwise okay to use (in which case the gateway would only be the connection object).</li>\n</ul>\n</li>\n</ul>\n<hr>\n<p>A gateway is usually either an end-point or allows bi-direction communication between dissimilar systems</p>\n<ul>\n<li>In contrast, sinks are just an event input point.</li>\n</ul>\n<hr>\n<h3 id=\"api-gateway\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#api-gateway\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>API Gateway</h3>\n<p>API gateway handles requests in one of two ways. </p>\n<ul>\n<li>Some requests are simply proxied/routed to the appropriate service. </li>\n<li>Other requests by fanning out to multiple services.</li>\n</ul>\n<p><img src=\"/Digital-Garden/assets/images/2021-12-20-11-28-44.png\"></p>\n<p>Rather than provide a one-size-fits-all style API, the API gateway can expose a different API for each client</p>\n<ul>\n<li>ex. the Netflix API gateway runs client-specific adapter code that provides each client with an API that’s best suited to its requirements.</li>\n</ul>\n<h4 id=\"backends-for-frontends\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#backends-for-frontends\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Backends for Frontends</h4>\n<p>This is a variation of the API Gateway approach whereby each client gets its own API gateway:\n<img src=\"/Digital-Garden/assets/images/2021-12-20-11-30-09.png\"></p>\n<h1 id=\"e-resources\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#e-resources\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>E Resources</h1>\n<p><a href=\"https://martinfowler.com/articles/gateway-pattern.html\">Martin Fowler article</a></p>\n<ul>\n<li>includes info on testing with gateway\n<a href=\"https://martinfowler.com/articles/refactoring-external-service.html\">Introduce gateway into existing app</a>\n<a href=\"https://github.com/cer/event-sourcing-examples/tree/master/java-spring/api-gateway-service\">Simple API Gateway service Java code</a></li>\n</ul>\n<hr>\n<h2 id=\"backlinks\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#backlinks\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Backlinks</h2>\n<ul>\n<li><a href=\"/Digital-Garden/notes/iIcGu3JKOogO50Uz5OAF6\">Sink</a></li>\n</ul>","noteIndex":{"id":"olZIVfSs2uLLr3BppFh4K","title":"Root","desc":"","updated":1618676699718,"created":1615482407722,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"../main/tech","name":"tech"},"contentHash":"777fb4dab9bcf63cbfe772245d7e4871","links":[],"anchors":{"digital-garden":{"type":"header","text":"Digital Garden","value":"digital-garden","line":8,"column":0,"depth":1}},"children":["zFMjbn3xihVNHjUIdZCD1","IK6NOKemuDjhfstJBovKL","RS8qp1GxwtiJopCUHTTtq","ZaTr28eWk1DrXOEsc1YVb","Vi0WYVLZunVM9iR8XZJn3","ngAbg7gluvbt1bY1UIRsi","RCPPXSakm5TvKka8kOmVp","MPx8ykTP57I40WTZvTP7f","ZU5WmdTG1bHoE8RcmZXZG","jqWiyYJff92RjXuUQt9PQ","KihijM8OQvZ4pASkkhqzL","F9vyqvls3OBCujtukqKhy","facc2b01-755a-409f-99f6-57bef2d1501f","m5ov42Vm6mR7RQWTvl1NW","YYt62mSW964cwb5nP0hva","PZxxZ4iESzSlbbHJKxuAZ","UDu62Pa6BaRqlG8uGoMhy","nMCtMXVvjBsJk3iw1zoIO","ANfx9Z4a6ZA0uJuSHtbIJ","BkG557LKUYbH1DnxprEVT","1TaH8zDTM98FZ9SYaeXLM","dc79799f-a55d-48ab-a8be-c48adb1b19c0","f6feef57-b8f5-451f-a09a-7b63f6a07183","4sz47Y0LKs1Si73rWtyyh","5a9fb1df-478e-4687-9be0-5cb97e61ec57","1374e9e9-1cbc-4e1f-b1ca-66b8569533dd","f529cc34-aba0-45ca-ad7e-02ddda318941","0zcauha3il2NqtxZazIo7","9bbd6f68-03b2-41f4-92e4-2ca313e8b450","5a2ab598-fa7e-4471-8bda-9f5831b679ae","uV6w4mZPoohWyZV4Xaad0","RgE0mZLaUjPftFPZsiAoe","mytCOts26Pidush65tdRW","fwUzxfLSPMH1eL8oBoLWx","TbW7PM9bg1y5TGkiWwQ8b","xiSIDeEtIc8X0lpUQlppI","0jxgntiLNHWFuCbzqtFGF","GkdMprLUe4QQULBxmGN6V","4SYc6v5hxY5g6Ip6kjpwO","fqVQpS9FBiXgKsZX3R3sJ","L5JUZlGAGvTxrsEBB7DY8","963c4b54-02bd-4943-a15f-52cf59ffd0f4","TeTedoeS2LdHPR632eCpM","e65188a1-177e-4ab2-99f9-75f85d537621","fajYnbVhCRDi74xn0H30R","bArGdGwqo3iFkyKMyE7qR","4Dcp7gbEVoLLgfu7bXFai","5d700782-fb81-416e-83f9-5dd88260e350","zubgzhNFE6KlTgXcjTz6O","8lpdfWa0cbSq1XJQbcYcY","17I8ZksXvqCH1mRtZDjHp","kF916Ow84qpJJeMRkWMIo","tMLkLcrIHHBz56xVmBLkP","CSePBQ6q7qhowKESqVwt7","laZ4OfLhZNK1Kuy6GaWUr","z5IJblOknQhMzZ5QZh4ye","N36FHxfxzwJfxDY3miWyX","3bb25f58-2b50-4fa3-af55-48ea9f88a081","aOqNcxZh8qN4MoBJcvGTc","u93Rz4fEWGu6VBR30Zraf","9hjMHnKvYT4jLKvuDSXaV","LgW7mTIALODoXc54B3p6S","UYPxfHBFWX7fb6hHU5bB6","qxSOd6SPN8qf9ZUojVFDX","WQoMTf6VXBaxCgksXAVsj","2Mw4XgfyCHXHNOX5yoCIY","UFrwsXzC1yr7Ge8FF8Vbo","a8edc4ac-028b-40ec-872a-e4a005b04b2a","0XJqmcdtcMZu66glBI5O8","lK8r8BXS4ThiUTe4xKIZe","93de42ca-53ea-460a-baa7-b9ec5c47cb1e","Rxs2jaGpdFzqYtP7lAJFJ","aO8W81Z0PyIb6Hs7nOHPW","I01hENHnh8Tqu3Ok8sLzG","evqsPNutOaZ8hcBCqxFQu","zhhxcjZUHdU8uRLwGb9Zh","G1aFACZB2ooWGMGwyd3ZW","YWy1C4tgoaCcw1m8JJsr7","Szj3o5iaNxPpesiCqwrbu","XhvCDW3fIw6h6MhY5ticq","Q70g7SusFZBQXzkuQifv4","AzfWDH3wp7jFpL2EYxBcW","y0fwpZ9qMqirsLiFyOciU","ZF8xj8wwDUqKlrwTrCFZ1","tAJvhqhdfyZZa87QHq1TU","4hRmipi8lxpBLyzWu5JVB","iTg0C7QjvnmqBZeEigJNs","3babc3d2-79ae-470a-9c06-ab8bba2e684e","bF3UsMFya3fMeXWDspVov","ULkfbL9WpktbVYnzhl6Jw","PpNOO8JYWe6dM8wruSa7x","di40pCxDn7IiqE8lFdD46","rmW0mkerqV35I8QPji6lM","3IFIK1ByzeIxZCByryGLN","iImkYAKfkw3beAl6pLbDn","tho65KN0ZpjQlVvP1fEzM","ecDe8DNWrkeQTwpTEvHje","Yqhdd9mSJGN7OJOeyoSD2","NEhsoOfR7J6o01ielAuUm","Ws5tah8tpeyn9tK8VBTg8","Bqpifx2HX3vjLhX9yvhTV","gWAg15uBJgkS2B0wcpMAa","l7V3v2ep1YdDCt7DOr7Ci","yM2PJBdqJnHpD63cPA6sW","qn0bre7eLbi3QMbCfWkUi","fSu0KxFL41IRouotqmbHs","0gtg24Mj1a1bQFPRGQNlO","7iQPBMltLPLbFEz2qbjPu","yoh4pwoXcfELInGKRdYf6","dCGCWXgAmiOZXbdULT1m6","jMavlje07sNa6hSEIE8WA","Xxm0JE4dKHxrQAaZfzvxD","PAEBZCyFBZJyR7OoMZ41E","PQ6km8RgRCuyICBPOYz8f","2bhftt8rGuxYu4pFgNqru","hjYIZpHQWuXfeEoGeJEKW","K2M9bQqVq2eQfm29eslKL","X8obW1iKwYsvNgKWGyCzy","yJwSC7hqYIezTFHf5i0Ev","c4Z7ETcOHUILRMH32Sfjw","qiR6dIu857b9M9kTqjOyK","8vflbCVkwZtYcqdDDTNAz","Ku1OgHMhELajzo61Gx7ye","LUrfhDWo8wuwZu7CN9TV8","osu6JGOnvXJ5gt3tpqWZY","1a6173cd-cf13-4b34-a522-8350bf9a364f","ZgCUp366YrF2Tyky2NT73","S2sBltrPfd8a7ICuD7CuH","oWCuBXOg6JWfZzjmKxmNl","jOmhZ8ovLYTPbpM1vqSDx","FraC6xzLy1ei91l1ICyc9","6ceBas2RE9Q4787GDngH7","734cd78d-0bc9-426b-803d-1efc84dfffe5","k4Bb09px6r0FxIRs49SXV","oaG3H1S9IUBO644nGZigu","Ka7agQJkUMRSWN0uFdkWK","si3z090WsiLasMhJBa1Az","ljKAVERmdEiKLK9hXGKBm","LIcuGYV0DDt1VWbvH6Sed","MgUSrpNCIwDOW4fX3vPOF","bZumdyapJ2H0wWWOmJ45i","QHXEIyeZGIGMVi5Q52UWI","i5Fya3Vzzm0rBT0ctByuo"],"parent":null,"data":{},"body":"\n# Digital Garden\n\nThis Wiki of Personal Information is organized according to domains and their\nsub-domains, along with specific implementation of those domains.\n\nFor instance, Git itself is a domain. Sub-domains of Git, would be `commit`,\n`tags`, `reflog` etc. implementations of each of those could be `cli`, `strat`\n(strategies), `inner` etc.\n\nThe goal of the wiki is to present data in a manner that is from the perspective\nof a querying user. Here, a user is a programmer wanting to get key information\nfrom a specific domain. For instance, if a user wants to use postgres functions\nand hasn't done them in a while, they should be able to query\n`postgres.functions` to see what information is available to them.\n\nThis wiki has been written with myself in mind. While learning each of these\ndomains, I have been sensitive to the \"aha\" moments and have noted down my\ninsights as they arose. I have refrained from capturing information that I\nconsidered obvious or otherwise non-beneficial to my own understanding.\n\nThe ability I hope to gain from this wiki is the ability to step away from any\ngiven domain for a long period of time, and be able to be passably useful for\nwhatever my goals are within a short period of time. Of course, this is all\nvague sounding, and really depends on the domain, along with the ends I am\ntrying to reach.\n\nTo achieve this, the system should be steadfast to:\n- be able to put information in relatively easily, without too much thought\n\trequired to make that determination.\n- be able to extract the information that we need, meaning there is a\n\thigh-degree in confidence in the location of the information. The idea is\n\tthat information loses a large amount of its value when it is unfindable.\n\tTherefore, a relatively strict ideology should be used when determining\n\twhere a piece of information belongs.\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":3,"useFMTitle":true,"useNoteTitleForLink":true,"noLegacyNoteRef":true,"mermaid":true,"useKatex":true,"dev":{"enablePreviewV2":true},"site":{"assetsPrefix":"/Digital-Garden","siteUrl":"https://tycholiz.github.io","copyAssets":true,"siteHierarchies":["root"],"siteRootDir":"docs","usePrettyRefs":true,"title":"Dendron","description":"Publishable tech notes","duplicateNoteBehavior":{"action":"useVault","payload":["tech"]},"siteLastModified":true,"gh_edit_branch":"main","usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_edit_link":true,"gh_edit_link_text":"Edit this page on GitHub","gh_root":"docs/","gh_edit_view_mode":"edit","writeStubs":true,"siteIndex":"root"},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{}},"workspace":{"dendronVersion":"0.67.1","vaults":[{"fsPath":"../main/tech","name":"tech"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"enableUserTags":true,"enableHashTags":true},"usePrettyRefs":true}},"__N_SSG":true}