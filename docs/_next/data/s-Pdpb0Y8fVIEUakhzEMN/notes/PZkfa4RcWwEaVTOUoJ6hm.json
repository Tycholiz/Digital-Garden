{"pageProps":{"note":{"id":"PZkfa4RcWwEaVTOUoJ6hm","title":"Block","desc":"","updated":1638428423468,"created":1638340839204,"custom":{},"fname":"ruby.lang.block","type":"note","vault":{"fsPath":"../main/tech","name":"tech"},"contentHash":"3d17d10e9c6ece47d6b51b6d1e393d78","links":[{"type":"wiki","from":{"fname":"ruby.lang.block","id":"PZkfa4RcWwEaVTOUoJ6hm","vaultName":"tech"},"value":"general.lang.feat.closure","alias":"closure","position":{"start":{"line":28,"column":14,"offset":852},"end":{"line":28,"column":51,"offset":889},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"general.lang.feat.closure"}},{"type":"wiki","from":{"fname":"ruby.lang.block","id":"PZkfa4RcWwEaVTOUoJ6hm","vaultName":"tech"},"value":"general.patterns.IoC","alias":"Inversion of Control","position":{"start":{"line":93,"column":34,"offset":3719},"end":{"line":93,"column":79,"offset":3764},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"general.patterns.IoC"}},{"from":{"fname":"ruby","vaultName":"tech"},"type":"backlink","position":{"start":{"line":44,"column":127,"offset":1475},"end":{"line":44,"column":153,"offset":1501},"indent":[]},"value":"ruby.lang.block"}],"anchors":{"two-ways-of-calling-blocks":{"type":"header","text":"Two ways of calling Blocks","value":"two-ways-of-calling-blocks","line":65,"column":0,"depth":2},"and-implicit-blocks":{"type":"header","text":"and Implicit Blocks","value":"and-implicit-blocks","line":70,"column":0,"depth":3},"explicitly-accepting-blocks":{"type":"header","text":"Explicitly accepting blocks","value":"explicitly-accepting-blocks","line":77,"column":0,"depth":3},"blocks-allow-us-to-implement-inversion-of-control":{"type":"header","text":"Blocks allow us to implement Inversion of Control","value":"blocks-allow-us-to-implement-inversion-of-control","line":99,"column":0,"depth":3},"syntax":{"type":"header","text":"Syntax","value":"syntax","line":102,"column":0,"depth":3}},"children":[],"parent":"1mkk573O8jrA66Frx8cKM","data":{}},"body":"<h1 id=\"block\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#block\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Block</h1>\n<p>A block is an anonymous code block that can be passed into a method. Therefore, a block is nothing more than a snippet code that can be created now, but executed later. Blocks are passed to methods that <code>yield</code> them within with the <code>do</code> and <code>end</code> keywords.</p>\n<ul>\n<li>From within that, every time <code>yield</code> is called, that code block that was passed in will get executed</li>\n<li>ex. The block is passed to the each method of an array object.</li>\n</ul>\n<pre class=\"language-rb\"><code class=\"language-rb\"><span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">someMethod</span></span>\n  hello <span class=\"token operator\">=</span> <span class=\"token string\">'hello'</span>\n  <span class=\"token keyword\">yield</span><span class=\"token punctuation\">(</span>hello<span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> block_given<span class=\"token operator\">?</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token comment\"># the block is between the curly braces</span>\nsomeMethod <span class=\"token punctuation\">{</span> <span class=\"token operator\">|</span>h<span class=\"token operator\">|</span> h <span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Something implemented in JS with callbacks would be implemented with blocks in Ruby:</p>\n<ul>\n<li>Blocks -> Ruby</li>\n<li>Callbacks -> Javascript</li>\n</ul>\n<p>Blocks are essentially methods, since they:</p>\n<ul>\n<li>can accept arguments</li>\n<li>returns a value</li>\n</ul>\n<p>But, they:</p>\n<ul>\n<li>have no name</li>\n<li>do not belong to an object</li>\n</ul>\n<p>a block is a <a href=\"/Digital-Garden/notes/AUH3mMzjmfU5dFTULt9pR\">closure</a>, so it can refer to variables from the scope in which it was declared.</p>\n<p>Blocks can only be created by passing them to a method when the method is called.</p>\n<p>Blocks are snippets of code that can be created to be executed later.</p>\n<p>Blocks are used extensively in Ruby for passing bits of code to functions. By using the <code>yield</code> keyword, a block can be implicitly passed without having to convert it to a proc.</p>\n<p>If we are using the <code>.each</code> method, we are using blocks. The part between <code>do</code> and <code>end</code> is the block:</p>\n<ul>\n<li>the <code>|name|</code> is the parameter of the block</li>\n</ul>\n<pre class=\"language-rb\"><code class=\"language-rb\"><span class=\"token variable\">@names</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">each</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>name<span class=\"token operator\">|</span>\n  puts <span class=\"token string\">\"Hello <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>name<span class=\"token delimiter tag\">}</span></span>!\"</span>\n<span class=\"token keyword\">end</span>\n</code></pre>\n<p>Internally, the <code>each</code> method will essentially call <code>yield \"Albert\"</code>, then <code>yield \"Brenda\"</code> and then <code>yield \"Charles\"</code>, and so on.</p>\n<p>Conceptually, this is what's happening under the hood:</p>\n<pre class=\"language-rb\"><code class=\"language-rb\"><span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">each</span></span>\n  i <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">while</span> i <span class=\"token operator\">&#x3C;</span> size\n    <span class=\"token keyword\">yield</span> at<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n    i <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n</code></pre>\n<p>The real power of blocks is when dealing with things that are more complicated than lists. Beyond handling simple housekeeping details within the method, you can also handle setup, teardown, and errors</p>\n<h2 id=\"two-ways-of-calling-blocks\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#two-ways-of-calling-blocks\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Two ways of calling Blocks</h2>\n<p>Blocks can be called in one of 2 ways</p>\n<ol>\n<li>by using <code>yield</code> (implicit blocks)</li>\n<li>by capturing it by specifying the final argument of the method as <code>&#x26;block</code> and using <code>block.call</code> (explicit blocks)</li>\n</ol>\n<h3 id=\"yield-and-implicit-blocks\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#yield-and-implicit-blocks\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a><code>yield</code> and Implicit Blocks</h3>\n<p>In Ruby, methods can take blocks implicitly and explicitly</p>\n<ul>\n<li>Implicit block passing works by calling the <code>yield</code> keyword in a method.\n<ul>\n<li><code>yield</code> finds and calls a passed block, so you don’t have to add the block to the list of arguments the method accepts.</li>\n</ul>\n</li>\n</ul>\n<p>Because Ruby allows implicit block passing, you can call all methods with a block. If it doesn’t call <code>yield</code>, the block is ignored. If the called method does <code>yield</code>, the passed block is found and called with any arguments that were passed to the <code>yield</code> keyword.</p>\n<h3 id=\"explicitly-accepting-blocks\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#explicitly-accepting-blocks\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Explicitly accepting blocks</h3>\n<p>We can explicitly accept a block in a method by adding it as an argument using an ampersand parameter (usually called <code>&#x26;block</code>). Since the block is now explicit, we can use the <code>#call</code> method directly on the resulting object instead of relying on <code>yield</code>.</p>\n<ul>\n<li>The <code>&#x26;block</code> argument is not a proper argument, so calling this method with anything else than a block will produce an <code>ArgumentError</code>.</li>\n</ul>\n<pre class=\"language-rb\"><code class=\"language-rb\"><span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">each_explicit</span></span><span class=\"token punctuation\">(</span><span class=\"token operator\">&#x26;</span>block<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> to_enum<span class=\"token punctuation\">(</span><span class=\"token symbol\">:each</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">unless</span> block\n\n  i <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">while</span> i <span class=\"token operator\">&#x3C;</span> size\n    block<span class=\"token punctuation\">.</span>call at<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n    i <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n</code></pre>\n<p>When a block is passed like this and stored in a variable, it is automatically converted to a <em>proc</em>.</p>\n<p>It's important to understand the different uses of <code>&#x26;</code> here as a prefix to the last argument of a function:</p>\n<ul>\n<li>in a function definition, it captures any passed block into that object</li>\n<li>in a function call, it expands the given callback object into a block</li>\n</ul>\n<h3 id=\"blocks-allow-us-to-implement-inversion-of-control\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#blocks-allow-us-to-implement-inversion-of-control\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Blocks allow us to implement <a href=\"/Digital-Garden/notes/bXY3W37GW2ytFJOgbJiol\">Inversion of Control</a></h3>\n<p>By accepting a block from you as a programmer, the method can pass control to you.</p>\n<h3 id=\"syntax\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#syntax\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Syntax</h3>\n<p>The following are identical:</p>\n<pre class=\"language-rb\"><code class=\"language-rb\"><span class=\"token number\">5.</span>times <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>name<span class=\"token operator\">|</span>\n  puts <span class=\"token string\">\"Oh, hello <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>name<span class=\"token delimiter tag\">}</span></span>!\"</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token number\">5.</span>times <span class=\"token punctuation\">{</span> <span class=\"token operator\">|</span>name<span class=\"token operator\">|</span> puts <span class=\"token string\">\"Oh, hello <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>name<span class=\"token delimiter tag\">}</span></span>!\"</span> <span class=\"token punctuation\">}</span>\n</code></pre>\n<hr>\n<h2 id=\"backlinks\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#backlinks\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Backlinks</h2>\n<ul>\n<li><a href=\"/Digital-Garden/notes/0gtg24Mj1a1bQFPRGQNlO\">Ruby</a></li>\n</ul>","noteIndex":{"id":"olZIVfSs2uLLr3BppFh4K","title":"Root","desc":"","updated":1618676699718,"created":1615482407722,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"../main/tech","name":"tech"},"contentHash":"777fb4dab9bcf63cbfe772245d7e4871","links":[],"anchors":{"digital-garden":{"type":"header","text":"Digital Garden","value":"digital-garden","line":8,"column":0,"depth":1}},"children":["zFMjbn3xihVNHjUIdZCD1","IK6NOKemuDjhfstJBovKL","RS8qp1GxwtiJopCUHTTtq","ZaTr28eWk1DrXOEsc1YVb","Vi0WYVLZunVM9iR8XZJn3","ngAbg7gluvbt1bY1UIRsi","RCPPXSakm5TvKka8kOmVp","MPx8ykTP57I40WTZvTP7f","ZU5WmdTG1bHoE8RcmZXZG","jqWiyYJff92RjXuUQt9PQ","KihijM8OQvZ4pASkkhqzL","F9vyqvls3OBCujtukqKhy","facc2b01-755a-409f-99f6-57bef2d1501f","m5ov42Vm6mR7RQWTvl1NW","YYt62mSW964cwb5nP0hva","PZxxZ4iESzSlbbHJKxuAZ","UDu62Pa6BaRqlG8uGoMhy","nMCtMXVvjBsJk3iw1zoIO","ANfx9Z4a6ZA0uJuSHtbIJ","BkG557LKUYbH1DnxprEVT","1TaH8zDTM98FZ9SYaeXLM","dc79799f-a55d-48ab-a8be-c48adb1b19c0","f6feef57-b8f5-451f-a09a-7b63f6a07183","4sz47Y0LKs1Si73rWtyyh","5a9fb1df-478e-4687-9be0-5cb97e61ec57","1374e9e9-1cbc-4e1f-b1ca-66b8569533dd","f529cc34-aba0-45ca-ad7e-02ddda318941","0zcauha3il2NqtxZazIo7","9bbd6f68-03b2-41f4-92e4-2ca313e8b450","5a2ab598-fa7e-4471-8bda-9f5831b679ae","uV6w4mZPoohWyZV4Xaad0","RgE0mZLaUjPftFPZsiAoe","mytCOts26Pidush65tdRW","fwUzxfLSPMH1eL8oBoLWx","TbW7PM9bg1y5TGkiWwQ8b","xiSIDeEtIc8X0lpUQlppI","0jxgntiLNHWFuCbzqtFGF","GkdMprLUe4QQULBxmGN6V","4SYc6v5hxY5g6Ip6kjpwO","fqVQpS9FBiXgKsZX3R3sJ","L5JUZlGAGvTxrsEBB7DY8","963c4b54-02bd-4943-a15f-52cf59ffd0f4","TeTedoeS2LdHPR632eCpM","e65188a1-177e-4ab2-99f9-75f85d537621","fajYnbVhCRDi74xn0H30R","bArGdGwqo3iFkyKMyE7qR","4Dcp7gbEVoLLgfu7bXFai","5d700782-fb81-416e-83f9-5dd88260e350","zubgzhNFE6KlTgXcjTz6O","8lpdfWa0cbSq1XJQbcYcY","17I8ZksXvqCH1mRtZDjHp","kF916Ow84qpJJeMRkWMIo","tMLkLcrIHHBz56xVmBLkP","CSePBQ6q7qhowKESqVwt7","laZ4OfLhZNK1Kuy6GaWUr","z5IJblOknQhMzZ5QZh4ye","N36FHxfxzwJfxDY3miWyX","3bb25f58-2b50-4fa3-af55-48ea9f88a081","aOqNcxZh8qN4MoBJcvGTc","u93Rz4fEWGu6VBR30Zraf","9hjMHnKvYT4jLKvuDSXaV","LgW7mTIALODoXc54B3p6S","UYPxfHBFWX7fb6hHU5bB6","qxSOd6SPN8qf9ZUojVFDX","WQoMTf6VXBaxCgksXAVsj","2Mw4XgfyCHXHNOX5yoCIY","UFrwsXzC1yr7Ge8FF8Vbo","a8edc4ac-028b-40ec-872a-e4a005b04b2a","0XJqmcdtcMZu66glBI5O8","lK8r8BXS4ThiUTe4xKIZe","93de42ca-53ea-460a-baa7-b9ec5c47cb1e","Rxs2jaGpdFzqYtP7lAJFJ","aO8W81Z0PyIb6Hs7nOHPW","I01hENHnh8Tqu3Ok8sLzG","evqsPNutOaZ8hcBCqxFQu","zhhxcjZUHdU8uRLwGb9Zh","G1aFACZB2ooWGMGwyd3ZW","YWy1C4tgoaCcw1m8JJsr7","Szj3o5iaNxPpesiCqwrbu","XhvCDW3fIw6h6MhY5ticq","Q70g7SusFZBQXzkuQifv4","AzfWDH3wp7jFpL2EYxBcW","y0fwpZ9qMqirsLiFyOciU","ZF8xj8wwDUqKlrwTrCFZ1","tAJvhqhdfyZZa87QHq1TU","4hRmipi8lxpBLyzWu5JVB","iTg0C7QjvnmqBZeEigJNs","3babc3d2-79ae-470a-9c06-ab8bba2e684e","bF3UsMFya3fMeXWDspVov","ULkfbL9WpktbVYnzhl6Jw","PpNOO8JYWe6dM8wruSa7x","di40pCxDn7IiqE8lFdD46","rmW0mkerqV35I8QPji6lM","3IFIK1ByzeIxZCByryGLN","iImkYAKfkw3beAl6pLbDn","tho65KN0ZpjQlVvP1fEzM","ecDe8DNWrkeQTwpTEvHje","Yqhdd9mSJGN7OJOeyoSD2","NEhsoOfR7J6o01ielAuUm","Ws5tah8tpeyn9tK8VBTg8","Bqpifx2HX3vjLhX9yvhTV","gWAg15uBJgkS2B0wcpMAa","l7V3v2ep1YdDCt7DOr7Ci","yM2PJBdqJnHpD63cPA6sW","qn0bre7eLbi3QMbCfWkUi","fSu0KxFL41IRouotqmbHs","0gtg24Mj1a1bQFPRGQNlO","7iQPBMltLPLbFEz2qbjPu","yoh4pwoXcfELInGKRdYf6","dCGCWXgAmiOZXbdULT1m6","jMavlje07sNa6hSEIE8WA","Xxm0JE4dKHxrQAaZfzvxD","PAEBZCyFBZJyR7OoMZ41E","PQ6km8RgRCuyICBPOYz8f","2bhftt8rGuxYu4pFgNqru","hjYIZpHQWuXfeEoGeJEKW","K2M9bQqVq2eQfm29eslKL","X8obW1iKwYsvNgKWGyCzy","yJwSC7hqYIezTFHf5i0Ev","c4Z7ETcOHUILRMH32Sfjw","qiR6dIu857b9M9kTqjOyK","8vflbCVkwZtYcqdDDTNAz","Ku1OgHMhELajzo61Gx7ye","LUrfhDWo8wuwZu7CN9TV8","osu6JGOnvXJ5gt3tpqWZY","1a6173cd-cf13-4b34-a522-8350bf9a364f","ZgCUp366YrF2Tyky2NT73","S2sBltrPfd8a7ICuD7CuH","oWCuBXOg6JWfZzjmKxmNl","jOmhZ8ovLYTPbpM1vqSDx","FraC6xzLy1ei91l1ICyc9","6ceBas2RE9Q4787GDngH7","734cd78d-0bc9-426b-803d-1efc84dfffe5","k4Bb09px6r0FxIRs49SXV","oaG3H1S9IUBO644nGZigu","Ka7agQJkUMRSWN0uFdkWK","si3z090WsiLasMhJBa1Az","ljKAVERmdEiKLK9hXGKBm","LIcuGYV0DDt1VWbvH6Sed","MgUSrpNCIwDOW4fX3vPOF","bZumdyapJ2H0wWWOmJ45i","QHXEIyeZGIGMVi5Q52UWI","i5Fya3Vzzm0rBT0ctByuo"],"parent":null,"data":{},"body":"\n# Digital Garden\n\nThis Wiki of Personal Information is organized according to domains and their\nsub-domains, along with specific implementation of those domains.\n\nFor instance, Git itself is a domain. Sub-domains of Git, would be `commit`,\n`tags`, `reflog` etc. implementations of each of those could be `cli`, `strat`\n(strategies), `inner` etc.\n\nThe goal of the wiki is to present data in a manner that is from the perspective\nof a querying user. Here, a user is a programmer wanting to get key information\nfrom a specific domain. For instance, if a user wants to use postgres functions\nand hasn't done them in a while, they should be able to query\n`postgres.functions` to see what information is available to them.\n\nThis wiki has been written with myself in mind. While learning each of these\ndomains, I have been sensitive to the \"aha\" moments and have noted down my\ninsights as they arose. I have refrained from capturing information that I\nconsidered obvious or otherwise non-beneficial to my own understanding.\n\nThe ability I hope to gain from this wiki is the ability to step away from any\ngiven domain for a long period of time, and be able to be passably useful for\nwhatever my goals are within a short period of time. Of course, this is all\nvague sounding, and really depends on the domain, along with the ends I am\ntrying to reach.\n\nTo achieve this, the system should be steadfast to:\n- be able to put information in relatively easily, without too much thought\n\trequired to make that determination.\n- be able to extract the information that we need, meaning there is a\n\thigh-degree in confidence in the location of the information. The idea is\n\tthat information loses a large amount of its value when it is unfindable.\n\tTherefore, a relatively strict ideology should be used when determining\n\twhere a piece of information belongs.\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":3,"useFMTitle":true,"useNoteTitleForLink":true,"noLegacyNoteRef":true,"mermaid":true,"useKatex":true,"dev":{"enablePreviewV2":true},"site":{"assetsPrefix":"/Digital-Garden","siteUrl":"https://tycholiz.github.io","copyAssets":true,"siteHierarchies":["root"],"siteRootDir":"docs","usePrettyRefs":true,"title":"Dendron","description":"Publishable tech notes","duplicateNoteBehavior":{"action":"useVault","payload":["tech"]},"siteLastModified":true,"gh_edit_branch":"main","usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_edit_link":true,"gh_edit_link_text":"Edit this page on GitHub","gh_root":"docs/","gh_edit_view_mode":"edit","writeStubs":true,"siteIndex":"root"},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{}},"workspace":{"dendronVersion":"0.67.1","vaults":[{"fsPath":"../main/tech","name":"tech"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"enableUserTags":true,"enableHashTags":true},"usePrettyRefs":true}},"__N_SSG":true}