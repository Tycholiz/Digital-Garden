<h1 id="cook">Cook<a aria-hidden="true" class="anchor-heading icon-link" href="#cook"></a></h1>
<h3 id="mocking-a-named-import">Mocking a named import<a aria-hidden="true" class="anchor-heading icon-link" href="#mocking-a-named-import"></a></h3>
<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getTime <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./time'</span><span class="token punctuation">;</span>

jest<span class="token punctuation">.</span><span class="token method function property-access">mock</span><span class="token punctuation">(</span><span class="token string">'./time'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">getTime</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token string">'1:11PM'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="mocking-only-the-named-import-and-leaving-other-imports-unmocked">Mocking only the named import (and leaving other imports unmocked)<a aria-hidden="true" class="anchor-heading icon-link" href="#mocking-only-the-named-import-and-leaving-other-imports-unmocked"></a></h3>
<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getTime<span class="token punctuation">,</span> isMorning <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./time'</span><span class="token punctuation">;</span>

jest<span class="token punctuation">.</span><span class="token method function property-access">mock</span><span class="token punctuation">(</span><span class="token string">'./time'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token spread operator">...</span>jest<span class="token punctuation">.</span><span class="token method function property-access">requireActual</span><span class="token punctuation">(</span><span class="token string">'./time'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token function-variable function">getTime</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token string">'1:11PM'</span><span class="token punctuation">,</span>
  <span class="token comment">// isMorning will return its true value</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="mocking-a-default-import">Mocking a default import<a aria-hidden="true" class="anchor-heading icon-link" href="#mocking-a-default-import"></a></h3>
<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports">getDayOfWeek</span> <span class="token keyword module">from</span> <span class="token string">'./time'</span><span class="token punctuation">;</span>

jest<span class="token punctuation">.</span><span class="token method function property-access">mock</span><span class="token punctuation">(</span><span class="token string">'./time'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token string">'Monday'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="mocking-default-and-named-imports">Mocking default and named imports<a aria-hidden="true" class="anchor-heading icon-link" href="#mocking-default-and-named-imports"></a></h3>
<p>If you want to mock default and named imports, youâ€™ll need to remember to use <code>__esModule: true</code></p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports">getDayOfWeek<span class="token punctuation">,</span> <span class="token punctuation">{</span> getTime <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./time'</span><span class="token punctuation">;</span>

jest<span class="token punctuation">.</span><span class="token method function property-access">mock</span><span class="token punctuation">(</span><span class="token string">'./time'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  __esModule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token string">'Thursday'</span>
  <span class="token function-variable function">getTime</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token string">'1:11PM'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="changing-what-the-mock-returns-per-test">Changing what the mock returns per test<a aria-hidden="true" class="anchor-heading icon-link" href="#changing-what-the-mock-returns-per-test"></a></h3>
<p>If you wanted to have <code>getDayOfWeek</code> to return a different value per test, you can use <code>mockReturnValue</code> in each of your tests</p>
<ul>
<li>If you only wanted to change what the mocked function returned for just one test, you need to use <code>mockReturnValueOnce</code>, otherwise you will change the mock for all other subsequent tests.</li>
</ul>
<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports">getDayOfWeek</span> <span class="token keyword module">from</span> <span class="token string">'./time'</span><span class="token punctuation">;</span>
jest<span class="token punctuation">.</span><span class="token method function property-access">mock</span><span class="token punctuation">(</span><span class="token string">'./time'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> jest<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'App renders Monday'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  getDayOfWeek<span class="token punctuation">.</span><span class="token method function property-access">mockReturnValue</span><span class="token punctuation">(</span><span class="token string">'Monday'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="mocking-third-party-library-eg-axios">Mocking Third Party library (e.g. Axios)<a aria-hidden="true" class="anchor-heading icon-link" href="#mocking-third-party-library-eg-axios"></a></h3>
<pre class="language-ts"><code class="language-ts"><span class="token keyword module">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> axios</span> <span class="token keyword module">from</span> <span class="token string">'axios'</span>

jest<span class="token punctuation">.</span><span class="token method function property-access">mock</span><span class="token punctuation">(</span><span class="token string">'axios'</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'good response'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  axios<span class="token punctuation">.</span><span class="token property-access">get</span><span class="token punctuation">.</span><span class="token method function property-access">mockResolvedValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">"bad response"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  axios<span class="token punctuation">.</span><span class="token property-access">get</span><span class="token punctuation">.</span><span class="token method function property-access">mockRejectedValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token spread operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>