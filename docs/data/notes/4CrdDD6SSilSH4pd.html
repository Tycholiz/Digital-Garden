<h1 id="jest-and-typescript"><a aria-hidden="true" class="anchor-heading" href="#jest-and-typescript"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Jest and TypeScript</h1>
<h3 id="problem-with-jest-mocks-and-typescript"><a aria-hidden="true" class="anchor-heading" href="#problem-with-jest-mocks-and-typescript"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Problem with Jest mocks and Typescript</h3>
<p>Mocking functions happens at runtime. At compile-time however, the Typescript compiler doesn't know that you have mocked those functions. During compilation, the TSC will do a type-check and it will complain that <code>mockReturnValueOnce</code> does not exist on that function.</p>
<ul>
<li>To solve this, we have to extend our function so it both have the original types and the type of a Jest Mock function:</li>
</ul>
<pre class="language-ts"><code class="language-ts">jest<span class="token punctuation">.</span><span class="token method function property-access">mock</span><span class="token punctuation">(</span><span class="token string">"../models/events"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getEvents <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"../models/events"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mockedGetEvents <span class="token operator">=</span> getEvents <span class="token keyword module">as</span> jest<span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">MockedFunction</span></span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> getEvents<span class="token operator">></span>
</code></pre>