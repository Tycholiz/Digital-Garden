<h1 id="cmds"><a aria-hidden="true" class="anchor-heading" href="#cmds"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Cmds</h1>
<p>All psql commands are just convenience wrappers around underlying SQL statements that are being executed</p>
<ul>
<li>ex. <code>\l+</code> executes an sql query on the <code>pg_catalog.pg_database</code> table, joining the <code>pg_catalog.pg_tablespace</code> table</li>
</ul>
<h2 id="connecting-to-psql-from-shell"><a aria-hidden="true" class="anchor-heading" href="#connecting-to-psql-from-shell"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Connecting to psql (from shell)</h2>
<p>Either:</p>
<pre><code>psql -d mydb -h localhost -p 5432 -U kyle
</code></pre>
<p>or simply:</p>
<pre><code>psql -d postgresql://kyle@localhost:5432/mydb
</code></pre>
<p>note: <code>@</code> symbol must be entered as <code>%40</code> to properly interpret it.</p>
<ul>
<li>ex. if hostname=<code>kyle@db1464.azure.com</code>, I connect like <code>psql -d postgresql://kyle%40db1464.azure.com</code></li>
</ul>
<h1 id="cli-psqlpgcli"><a aria-hidden="true" class="anchor-heading" href="#cli-psqlpgcli"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>CLI (psql/pgcli)</h1>
<p>show help for a command - <code>\h &#x3C;sql command></code></p>
<p>connect to db - <code>\c mydb</code>
show schemas - <code>\dn</code>
display tables in "public" schema - <code>\dt public.*</code>
display views in "public" schema - <code>\dv public.*</code>
display table signature <code>\d &#x3C;TABLENAME></code>
display types <code>\dT &#x3C;SCHEMA></code>
display enum values <code> \dT+ &#x3C;TYPE></code>
display roles - <code>\du</code>
display schema - <code>\dn</code>
display functions - <code>\df</code>
display function definition - <code>\ef app_public.register_user</code>
display extensions - <code>\dx</code>
read in commands from a sql file- <code>\i</code></p>
<ul>
<li>ex. <code>\i migration.sql</code></li>
<li>this is an alternative to shell-level <code>psql -h localhost -p 5432 -U kyletycholiz -d f1db &#x3C; migration.sql</code>
set variable in psql - <code>\set DATABASE_OWNER nf_dev</code>
set variable's value from command line - <code>psql --variable "DATABASE_OWNER=nf_dev"</code>
list all databases, and show their respective size on disk - <code>\l+</code></li>
</ul>
<p>display info about current connection - <code>\conninfo</code></p>
<ul>
<li>current user, database, port etc.</li>
</ul>
<p>cycle command history - <code>&#x3C;C-r></code></p>
<h2 id="named-queries"><a aria-hidden="true" class="anchor-heading" href="#named-queries"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Named Queries</h2>
<p>Create a new named query</p>
<pre><code>\ns &#x3C;name> select * from ...
</code></pre>
<p>Call named query</p>
<pre><code>\n &#x3C;name>
</code></pre>
<p>Delete a named query</p>
<pre><code>\nd &#x3C;name>
</code></pre>
<h3 id="positional-parameters"><a aria-hidden="true" class="anchor-heading" href="#positional-parameters"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Positional Parameters</h3>
<p>Named queries support shell-style parameter substitution. Save your named query with parameters as placeholders (e.g. $1, $2, $3, etc.):</p>
<pre><code>\ns user_by_name select * from users where name = '$1'
</code></pre>
<p>When you call a named query with parameters, just add the parameters after the query's name. You can put quotes around arguments that include spaces.</p>
<pre><code>\n user_by_name "Skelly McDermott"
</code></pre>
<hr>
<h2 id="children"><a aria-hidden="true" class="anchor-heading" href="#children"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Children</h2>
<ol>
<li><a href="/Digital-Garden/notes/ea3006d1-e795-4963-8276-78393b366d4c">Copy</a></li>
</ol>