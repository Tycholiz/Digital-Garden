<h1 id="caddyfile">Caddyfile<a aria-hidden="true" class="anchor-heading icon-link" href="#caddyfile"></a></h1>
<p>Caddy config natively uses a JSON structure. However, because writing JSON by hand can be error-prone, we have config adapters to help us.</p>
<ul>
<li>The standard config adapter coming with Caddy converts a <code>Caddyfile</code> into JSON.</li>
<li>At the end of the day, JSON is more flexible, but not quite as simple. If we stay on the well-beaten path, then we probably can just get by with a Caddyfile.</li>
</ul>
<p>We can use a <code>caddy.json</code> config file like this:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
	<span class="token property">"apps"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">"http"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">"servers"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token property">"example"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token property">"listen"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">":2015"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token property">"routes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
						<span class="token punctuation">{</span>
							<span class="token property">"handle"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
								<span class="token property">"handler"</span><span class="token operator">:</span> <span class="token string">"static_response"</span><span class="token punctuation">,</span>
								<span class="token property">"body"</span><span class="token operator">:</span> <span class="token string">"Hello, world!"</span>
							<span class="token punctuation">}</span><span class="token punctuation">]</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">]</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
</code></pre>
<p>Or, the equivalent can be expressed in a <code>Caddyfile</code></p>
<pre class="language-caddyfile"><code class="language-Caddyfile">:2015

respond "Hello, world!"
</code></pre>
<p>If we run <code>caddy adapt</code> in a directory where there is a <code>Caddyfile</code>, then we can see the json that the Caddyfile contents are being converted into. This is the <em>config adaptor</em> at work.</p>
<p>If we are serving multiple apps from a single Caddy server, then we need to use curly braces (<code>{}</code>) in the Caddyfile to wrap the details of a single app. Otherwise, curly braces aren't needed</p>
<hr>
<strong>Children</strong>
<ol>
<li><a href="/notes/ZwmWxjscEyOuNE0fSLX3B">Cook</a></li>
<li><a href="/notes/M1kq96jeSbyYzwxBs1BAq">Directives</a></li>
</ol>