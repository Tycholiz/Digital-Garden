<h1 id="actions"><a aria-hidden="true" class="anchor-heading" href="#actions"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Actions</h1>
<p>A Github Action is installed as soon as we have a <code>.github/workflows</code> directory committed to our repo on Github.</p>
<p><img src="/Digital-Garden/assets/images/2021-04-15-21-56-11.png"></p>
<h2 id="terminology"><a aria-hidden="true" class="anchor-heading" href="#terminology"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Terminology</h2>
<h3 id="workflow"><a aria-hidden="true" class="anchor-heading" href="#workflow"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Workflow</h3>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Workflow</span></div>
<a href="/Digital-Garden/notes/PYJClro675YloFphPq4ww" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><h3 id="workflow-1"><a aria-hidden="true" class="anchor-heading" href="#workflow-1"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Workflow</h3>
<p>A workflow is an automated procedure that exists as a part of our repo.</p>
<ul>
<li>Workflows are made up of a collection of jobs which run is response to some event (on PR, on push etc)</li>
</ul>
<p>A Github Workflow can be used to build, test, package, release, or deploy a project on GitHub.</p>
<p>Workflows can be configured to run in response to a webhook call, so we can trigger workflows in response to events happening outside Github.</p>
</div></div><p></p><p></p>
<h3 id="job"><a aria-hidden="true" class="anchor-heading" href="#job"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Job</h3>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Job</span></div>
<a href="/Digital-Garden/notes/NlU4vMARimiAmtkYYU4jy" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><h3 id="job-1"><a aria-hidden="true" class="anchor-heading" href="#job-1"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Job</h3>
<p>A job is a set of steps that execute on a single runner
A workflow with multiple jobs will run those jobs in parallel by default (configurable)
Each job in a workflow runs in a fresh virtual environment</p>
</div></div><p></p><p></p>
<h3 id="step"><a aria-hidden="true" class="anchor-heading" href="#step"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Step</h3>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Step</span></div>
<a href="/Digital-Garden/notes/PcguP0GADqIlJTNnVd1cI" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><h3 id="step-1"><a aria-hidden="true" class="anchor-heading" href="#step-1"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Step</h3>
<p>A step is an individual task that can run commands in a job</p>
<p>A step can either be:</p>
<ul>
<li>a shell command</li>
<li>an action</li>
</ul>
<p>Each step in a job executes on the same runner, allowing the actions in that job to share data with each other.</p>
<p>Changing directories in one step does not carry through to the next step:</p>
<pre class="language-yml"><code class="language-yml"><span class="token comment"># workflow.actions.yml</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> cd into publishable
      <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
        cd publishable 
        pwd</span>

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> does the cd carry thru<span class="token punctuation">?</span>
      <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
        pwd</span>
</code></pre>
<p>log:</p>
<pre><code>Run cd publishable
/home/runner/work/Digital-Garden/Digital-Garden/publishable

Run pwd
/home/runner/work/Digital-Garden/Digital-Garden
</code></pre></div></div><p></p><p></p>
<h3 id="action"><a aria-hidden="true" class="anchor-heading" href="#action"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Action</h3>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Action</span></div>
<a href="/Digital-Garden/notes/RPVQIolhTlXJtC1GLESiN" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><h3 id="action-1"><a aria-hidden="true" class="anchor-heading" href="#action-1"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Action</h3>
<p>Actions are standalone commands that are combined into steps to create a job
Actions are the smallest portable building block of a workflow. You can create your own actions, or use actions created by the GitHub community</p>
<p>For instance, we have the <code>checkout@v2</code> action, which allows the runner to checkout a repo. In fact, we can checkout any SHA from any repo.</p>
</div></div><p></p><p></p>
<h3 id="runner"><a aria-hidden="true" class="anchor-heading" href="#runner"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Runner</h3>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Runner</span></div>
<a href="/Digital-Garden/notes/LX0tgzNGtnMD1OnNr1FqU" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><h3 id="runner-1"><a aria-hidden="true" class="anchor-heading" href="#runner-1"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Runner</h3>
<p>A runner is a server that has the GitHub Actions runner application installed</p>
<ul>
<li>meaning we could use the managed service from Github, or self-host the Runner.</li>
</ul>
<p>A runner listens for available jobs, runs one job at a time, and reports the progress, logs, and results back to GitHub</p>
<p>GitHub-hosted runners are based on Ubuntu Linux, Microsoft Windows, and macOS</p>
</div></div><p></p><p></p>
<hr>
<h3 id="secrets"><a aria-hidden="true" class="anchor-heading" href="#secrets"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Secrets</h3>
<p><code>GITHUB_TOKEN</code> is passed to the runner when a workflow is triggered.</p>
<ul>
<li>Aside from this, no other secrets are passed by default, and must be configured manually.</li>
</ul>
<p>To provide an action with a secret (either as input or as an env variable), use the <code>secrets</code> context.</p>
<ul>
<li>This allows us to access secrets we've created in our repo.</li>
<li><a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions">more info</a></li>
</ul>
<p>Secrets should not be passed between processes via the command line, as these commands might be visible to other users with the <code>ps</code> command.</p>
<ul>
<li>This is why we use <code>STDIN</code> or env variables to pass secrets.</li>
</ul>
<hr>
<h2 id="children"><a aria-hidden="true" class="anchor-heading" href="#children"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Children</h2>
<ol>
<li><a href="/Digital-Garden/notes/RPVQIolhTlXJtC1GLESiN">Action</a></li>
<li><a href="/Digital-Garden/notes/TpBclT7C2SePGteUm6ogD">Env Vars</a></li>
<li><a href="/Digital-Garden/notes/NlU4vMARimiAmtkYYU4jy">Job</a></li>
<li><a href="/Digital-Garden/notes/LX0tgzNGtnMD1OnNr1FqU">Runner</a></li>
<li><a href="/Digital-Garden/notes/PcguP0GADqIlJTNnVd1cI">Step</a></li>
<li><a href="/Digital-Garden/notes/PYJClro675YloFphPq4ww">Workflow</a></li>
</ol>