<h1 id="iife">IIFE<a aria-hidden="true" class="anchor-heading icon-link" href="#iife"></a></h1>
<p>When async/await was first introduced, attempting to use an <code>await</code> outside of an async function resulted in a SyntaxError. Many developers utilized immediately-invoked async function expressions as a way to get access to the feature.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">await</span> <span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'ðŸŽ‰'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// â†’ SyntaxError: await is only valid in async function</span>

<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">await</span> <span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'ðŸŽ‰'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">// â†’ ðŸŽ‰</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<ul>
<li>note: this IIFE here could be considered to be analogous to the <code>main</code> function of a C program (ie. it is the entrypointâ€” it is what gets called when you run <code>node filename.js</code>). Otherwise, we would be declaring the function, then calling it</li>
</ul>
<p>Without top-level await, JavaScript developers often used async immediately-invoked function expressions just to get access to await. Unfortunately, this pattern results in less determinism of graph execution and static analyzability of applications. For these reasons, the lack of top-level await was viewed as a higher risk than the hazards introduced with the feature.</p>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/notes/nssteelmtj7i7uoroauhklo">Namespace</a></li>
</ul>