<h1 id="yml">YML<a aria-hidden="true" class="anchor-heading icon-link" href="#yml"></a></h1>
<p>YAML stands for <em>Yaml Ain't a Markup Language</em>.</p>
<p>YAML is excellent for configuration files and alike thanks to anchors and aliases that prevent you from having sparse chunks of text, as well as comments which allow you to clearly explain the logic behind a given setup, etc.,</p>
<p>Rather than parse and stringify, YAML uses the following terms:</p>
<ul>
<li><em>load</em> - a load is the process of translating a character stream to data structures (the actual data you operate with).
<ul>
<li>Parsing is a step of that process, yet the YAML processor has additional tasks to perform than to simply parse a source.</li>
</ul>
</li>
<li><em>dump</em> - the reverse operation of serializing data back to text.</li>
</ul>
<p>YAML doesn't support extending arrays, so when we override an array value, we need to provide all the contents of the array, not just the diff</p>
<h2 id="directives">Directives<a aria-hidden="true" class="anchor-heading icon-link" href="#directives"></a></h2>
<p>A directive is an instruction you can supply to the YAML processor. One can pick from two directives:</p>
<ul>
<li><code>YAML</code></li>
<li><code>TAG</code></li>
</ul>
<p><code>---</code> is not a "document start" marker. This particular notation stands for "directives end".</p>
<ul>
<li>YAML allows you to specify multiple documents in a single stream (e.g. file), by separating them with <code>—--</code></li>
</ul>
<h2 id="code-reuse">Code reuse<a aria-hidden="true" class="anchor-heading icon-link" href="#code-reuse"></a></h2>
<h3 id="anchors--and-aliases-">Anchors (<code>&#x26;</code>) and Aliases (<code>*</code>)<a aria-hidden="true" class="anchor-heading icon-link" href="#anchors--and-aliases-"></a></h3>
<p>can be used to duplicate content across your yml file.</p>
<ul>
<li>with it, we can duplicate or inherit properties</li>
</ul>
<p>Anchors are identified by an <code>&#x26;</code> character, and aliased by an <code>*</code> character.</p>
<p>You can use YAML anchors to merge YAML arrays.</p>
<p>Below <code>&#x26;flag</code> identifies the Apple item, and is later referenced.</p>
<pre class="language-yml"><code class="language-yml"><span class="token punctuation">-</span> <span class="token important">&#x26;flag</span> Apple
<span class="token punctuation">-</span> <span class="token important">*flag</span>
</code></pre>
<p>Becomes this when the yml is parsed:</p>
<pre class="language-yml"><code class="language-yml"><span class="token punctuation">-</span> Apple
<span class="token punctuation">-</span> Apple
</code></pre>
<h3 id="overrides--aka-map-merging">Overrides (<code>&#x3C;&#x3C;</code>) a.k.a. map merging<a aria-hidden="true" class="anchor-heading icon-link" href="#overrides--aka-map-merging"></a></h3>
<p>This is a special key that indicates key-values from another mapping should be merged into this mapping.</p>
<p>This example demonstrates 2 features:</p>
<ul>
<li>Anchors can be used with non-scalar values, such as whole objects (here the <code>nodeinfo</code> object is referred to in the <code>echoit</code> container)</li>
<li>Overrides, which allows us to merge the key-value pairs of <code>&#x26;function</code> into the <code>echoit</code> object
<ul>
<li>note: that the <code>image</code> key-value gets overwritten, since we define it even though it already exists in <code>&#x26;function</code></li>
</ul>
</li>
</ul>
<pre class="language-yml"><code class="language-yml"><span class="token comment"># docker-compose.yml</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">nodeinfo</span><span class="token punctuation">:</span> <span class="token important">&#x26;function</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> functions/nodeinfo<span class="token punctuation">:</span>latest
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
      <span class="token key atrule">function</span><span class="token punctuation">:</span> <span class="token string">"true"</span>

<span class="token key atrule">echoit</span><span class="token punctuation">:</span>
    <span class="token key atrule">&#x3C;&#x3C;</span><span class="token punctuation">:</span> <span class="token important">*function</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> functions/alpine<span class="token punctuation">:</span>health
</code></pre>
<hr>
<h3 id="strings-in-yaml">Strings in YAML<a aria-hidden="true" class="anchor-heading icon-link" href="#strings-in-yaml"></a></h3>
<p>When putting a string over multiple lines</p>
<ul>
<li><code>|</code> will preserve all new lines</li>
<li><code>></code> will fold them into a single line</li>
</ul>
<pre class="language-yml"><code class="language-yml"><span class="token punctuation">|</span>
Winnie<span class="token punctuation">-</span>the<span class="token punctuation">-</span>Pooh
Винни<span class="token punctuation">-</span>ПухCOPY
</code></pre>
<p>The equivalent string in a JSON document would be:</p>
<pre class="language-json"><code class="language-json"><span class="token string">"Winnie-the-Pooh\nВинни-Пух\n"</span>COPY
</code></pre>
<p>Now, if the folded style was used, the output would be considerably different:</p>
<pre class="language-yml"><code class="language-yml"><span class="token punctuation">></span>
Winnie<span class="token punctuation">-</span>the<span class="token punctuation">-</span>Pooh
Винни<span class="token punctuation">-</span>ПухCOPY
</code></pre>
<p>Would result in:</p>
<pre class="language-json"><code class="language-json"><span class="token string">"Winnie-the-Pooh Винни-Пух\n"</span>
</code></pre>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/notes/zirmu2JLi2lSneEH562Wp">Kustomize</a></li>
</ul>