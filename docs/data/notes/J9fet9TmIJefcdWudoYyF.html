<h1 id="tls-certificates">TLS Certificates<a aria-hidden="true" class="anchor-heading icon-link" href="#tls-certificates"></a></h1>
<h3 id="server-certificate">Server certificate<a aria-hidden="true" class="anchor-heading icon-link" href="#server-certificate"></a></h3>
<p>In order to establish a secure connection between client and server, the server must provide a digital certificate, proving their identity to the client.</p>
<p>The client then conducts <em>certification path validation</em>, ensuring that:</p>
<ol>
<li>The subject of the certificate matches the host name (not to be confused with the domain name) to which the client is trying to connect.</li>
<li>A trusted certificate authority has signed the certificate.</li>
</ol>
<ul>
<li>the certificate path starts with the <code>Subject</code> certificate, and proceeds through a number of intermediate certificates up to a trusted root certificate, typically issued by a trusted certificate authority (CA).</li>
</ul>
<p>Once the client has validated successfully, a secure connection is established between it and the server.</p>
<p>The certificate has a <code>Subject</code> field which identifies the primary host name of the server as the <em>Common Name</em></p>
<ul>
<li>a certificate may specify more than one hostname (e.g. a domain and its subdomains), which are called <em>Subject Alternative Name (SAN) certificates</em>, which contain a <code>Subject Alternative Name</code> field</li>
</ul>
<h3 id="client-certificate">Client Certificate<a aria-hidden="true" class="anchor-heading icon-link" href="#client-certificate"></a></h3>
<p>Client certificates authenticate the client connecting to a TLS service.</p>
<ul>
<li>ex. To connect to Zscaler VPN, we must have a certificate issued by Zscaler in our filesystem.</li>
</ul>
<p>ex. Zscaler?</p>
<h3 id="certificate-chain">Certificate chain<a aria-hidden="true" class="anchor-heading icon-link" href="#certificate-chain"></a></h3>
<p>A certificate chain is an ordered list of certificates, containing an SSL/TLS server certificate, intermediate certificate, and <a href="/notes/GLX9Wh0NbQGCEHLaQlkdN">Certificate Authority</a>.</p>
<ul>
<li>There are 1 or more intermediate certificates, and act as middlemen between the protected root certificates and the server certificates issued out to the public.</li>
</ul>
<p>When we install the TLS certificate, we will also be sent an intermediate root certificate.</p>
<p>When a browser downloads our website’s TLS certificate upon arriving at our homepage, it begins chaining that certificate through the intermediate certificates, all the way back to the trusted root certificate.</p>
<ul>
<li>if it can't be chained back to a trusted root, the browser will issue a warning about the certificate.</li>
</ul>
<p>To view the certificate chain for google.com, run:</p>
<pre class="language-sh"><code class="language-sh">openssl s_client -connect google.com:443 -servername google.com
</code></pre>
<p>Example output:</p>
<pre class="language-sh"><code class="language-sh">0 s:/C=US/ST=California/L=Mountain View/O=Google Inc/CN=*.google.com
i:/C=US/O=Google Inc/CN=Google Internet Authority G2
1 s:/C=US/O=Google Inc/CN=Google Internet Authority G2
i:/C=US/O=GeoTrust Inc./CN=GeoTrust Global CA
2 s:/C=US/O=GeoTrust Inc./CN=GeoTrust Global CA
i:/C=US/O=Equifax/OU=Equifax Secure Certificate Authority
</code></pre>
<p>Understanding the output:</p>
<ul>
<li>the numbered lines are:
<ul>
<li>0: server certificate</li>
<li>1: intermediate</li>
<li>2: root</li>
</ul>
</li>
<li>s: indicates the certificate subject</li>
<li>i: indicates the issuing certificate’s subject.</li>
</ul>
<p>The certificate chain is valid if:</p>
<ul>
<li>Subject of each certificate matches the Issuer of the preceding certificate in the chain (except for the server certificate).</li>
<li>Subject and Issuer are the same for the root certificate.</li>
</ul>
<p>In other words:</p>
<ul>
<li>The Subject of the intermediate certificate matches the Issuer of the server certificate.</li>
<li>The Subject of the root certificate matches the Issuer of the intermediate certificate.</li>
<li>The Subject and Issuer are the same in the root certificate.</li>
</ul>
<h3 id="self-signed-certificate">Self-signed Certificate<a aria-hidden="true" class="anchor-heading icon-link" href="#self-signed-certificate"></a></h3>
<p>A self-signed certificate refers to a certificate that is created and signed by the same entity whose identity it certifies </p>
<ul>
<li>ex. we create a certificate from our Synology NAS, and it is also the same NAS that certifies the machine's identity.</li>
</ul>
<p>Self-signed certificates are signed with the private key generated by the entity</p>
<p>Because self-signed certificates are not issued by third-party certificate authorities, they provide less proof of the identity of the server and are usually only used to secure channels between the server and a group of known users.</p>
<hr>
<h2 id="server-certificate-1">Server Certificate<a aria-hidden="true" class="anchor-heading icon-link" href="#server-certificate-1"></a></h2>
<p>Used to authenticate the identity of a server to the client that is trying to connect to it.</p>
<ul>
<li>this is the certificate that is issued to the specific domain the user is needing coverage for</li>
</ul>
<p>When a server certificate gets installed on a website, HTTPS gets enabled, and the certificate chain gets created, the result of which vouches for the authenticity of the website.</p>
<ul>
<li>When we hop on to our computers and type in a website URL, the server certificate ensures that the data flow between our client browser and the domain we’re trying to reach stays secure</li>
</ul>
<p>Also known as SSL/TLS certificates</p>
<p>Based on PKI</p>
<h2 id="client-certificate-1">Client Certificate<a aria-hidden="true" class="anchor-heading icon-link" href="#client-certificate-1"></a></h2>
<p>Used to validate the identity of a client.</p>
<ul>
<li>In this way, it serves as a password, as in theory, no one should be able to produce that certificate but the true client.</li>
<li>Client certs don't encrypt any data.</li>
</ul>
<p>Client certificates exist because passwords aren't that secure.</p>
<p>Client certificates use the Public Key Infrastructure (PKI) for authentication (just as server certificates do).</p>
<ul>
<li>Difference is that client certificates don't encrypt any data; they are just for validation purposes.</li>
</ul>
<p>Contain "Issued to" and "Issued by" fields</p>
<p>Based on PKI</p>
<hr>
<strong>Children</strong>
<ol>
<li><a href="/notes/GLX9Wh0NbQGCEHLaQlkdN">CA (Certificate Authority)</a></li>
</ol>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/notes/bO8xztJCzUxsN2sM4YsBE">Public Key Cryptography</a></li>
</ul>