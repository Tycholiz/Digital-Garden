<h1 id="prerendering"><a aria-hidden="true" class="anchor-heading" href="#prerendering"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Prerendering</h1>
<p>There are 2 types of pre-rendering that Next offers:</p>
<ul>
<li>static generations - The <code>about</code> page is identical no matter who views that page. - Server-side rendering - HTML is generated by the server on each request.</li>
<li>Client-side rendering - as vanilla React does, we can still opt to use CSR if advantageous.</li>
</ul>
<h3 id="static-site-generation-ssg"><a aria-hidden="true" class="anchor-heading" href="#static-site-generation-ssg"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Static Site Generation (SSG)</h3>
<p>The idea is "Why does the html need to be generated on the client, when we can leverage the server to do it beforehand? (ie. at build time)"</p>
<ul>
<li>this is the default, thus recommended option</li>
</ul>
<p>If your page shows frequently updated data, and the page content changes on every request, you <em>must</em> use SSR.</p>
<p>Statically generated pages can be cached by CDN</p>
<p><code>getStaticProps</code> is run at build time.</p>
<p>Examples:</p>
<ul>
<li>Marketing pages</li>
<li>Blog posts and portfolios</li>
<li>E-commerce product listings</li>
<li>Help and documentation</li>
</ul>
<h3 id="server-side-rendering-ssr"><a aria-hidden="true" class="anchor-heading" href="#server-side-rendering-ssr"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Server-Side Rendering (SSR)</h3>
<p>Here, Next.js pre-renders a page on each request. It will be slower because the page cannot be cached by a CDN, but the pre-rendered page will always be up-to-date. </p>
<p>To use Server-side Rendering for a page, you need to export an async function called <code>getServerSideProps</code>. This function will be called by the server on every request.</p>
<h4 id="usage"><a aria-hidden="true" class="anchor-heading" href="#usage"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Usage</h4>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Page</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Render data...</span>
<span class="token punctuation">}</span>

<span class="token comment">// This gets called on every request</span>
<span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getServerSideProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Fetch data from external API</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://.../data</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword control-flow">await</span> res<span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// Pass data to the page via props</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> props<span class="token operator">:</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">Page</span>
</code></pre>
<p>When you run <code>yarn build</code>, it generates 1 HTML document for every route on your site. Every side page, every blog post, every store item â€” an HTML file is created for each of them, ready to be served up immediately.</p>
<p><code>getServerSideProps</code> is run on every request</p>