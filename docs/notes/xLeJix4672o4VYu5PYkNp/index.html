<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><title>Ref</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Publishable tech notes"/><meta property="og:title" content="Ref"/><meta property="og:description" content="Publishable tech notes"/><meta property="og:url" content="https://tycholiz.github.io/Digital-Garden/notes/xLeJix4672o4VYu5PYkNp/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="3/6/2021"/><meta property="article:modified_time" content="3/28/2021"/><link rel="canonical" href="https://tycholiz.github.io/Digital-Garden/notes/xLeJix4672o4VYu5PYkNp/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/Digital-Garden/_next/static/css/804c5fc85a5d7e04.css" as="style"/><link rel="stylesheet" href="/Digital-Garden/_next/static/css/804c5fc85a5d7e04.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/Digital-Garden/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/Digital-Garden/_next/static/chunks/webpack-d53c65e15128d807.js" defer=""></script><script src="/Digital-Garden/_next/static/chunks/framework-dc33c0b5493501f0.js" defer=""></script><script src="/Digital-Garden/_next/static/chunks/main-9409ea3202b3ee44.js" defer=""></script><script src="/Digital-Garden/_next/static/chunks/pages/_app-585c2573c1834e35.js" defer=""></script><script src="/Digital-Garden/_next/static/chunks/155-0a8d44b6408c244d.js" defer=""></script><script src="/Digital-Garden/_next/static/chunks/pages/notes/%5Bid%5D-30a63e62504f2dc5.js" defer=""></script><script src="/Digital-Garden/_next/static/s-Pdpb0Y8fVIEUakhzEMN/_buildManifest.js" defer=""></script><script src="/Digital-Garden/_next/static/s-Pdpb0Y8fVIEUakhzEMN/_ssgManifest.js" defer=""></script><script src="/Digital-Garden/_next/static/s-Pdpb0Y8fVIEUakhzEMN/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div class="ant-col ant-col-xs-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"></div><div class="ant-col ant-col-xs-12"></div><div style="margin-left:4px;display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout site-layout" style="margin-top:64px"><section class="ant-layout site-layout" style="flex-direction:row"><section class="ant-layout site-layout-sidebar" style="flex:0 0 auto;width:calc((100% - 992px) / 2 + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></section><section class="ant-layout side-layout-main" style="max-width:1200px;display:initial"><main class="ant-layout-content main-content" role="main" style="padding:0 24px"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="ref"><a aria-hidden="true" class="anchor-heading" href="#ref"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Ref</h1>
<h2 id="ref-1"><a aria-hidden="true" class="anchor-heading" href="#ref-1"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Ref</h2>
<ul>
<li>Ref - a mutable value that is shared by all component renders.
<ul>
<li>Think of a ref as a piece of state that doesn't abide by the same re-rendering rules that apply to normal state.</li>
<li>a ref can be a function or an object</li>
</ul>
</li>
<li>ex. Imagine we had 2 counters: one made with state, and the other with refs. As expected, when we increment the state count, the component understands that it needs to re-render, so it does so and reads in the new value of count. When we increment the ref count however, the component understands that it should not update, so we end up still seeing the old value, even though underneath the hood, the count has still risen. Since nothing has caused the component to re-render, this value will remain static. Now imagine that we increment the state count. React will recognize that an updated state means that it needs to re-render. Upon doing so, the current value of the ref will be read.</li>
<li>traditionally, refs were meant to let you directly access an html element.
<ul>
<li>ex. focus an input field</li>
</ul>
</li>
<li>The <code>useRef()</code> hook helps create mutable variables inside a functional component that won’t update on every render.</li>
<li>a ref can be used when the "React-way" of interacting with children (ie. Passing props) doesn't cut it, or we want to manually access DOM nodes or React elements created in the render method</li>
<li>The variables created with useRef() persists in between component renders (like state).</li>
<li>The nature of refs is that we can change the value of the ref, and it will not cause the component to re-render.</li>
<li>Refs have a value called <code>.current()</code>, which gives us the value of the ref in the current rendering of the component.</li>
<li>use refs To manage focus, text selection, or media playback</li>
<li>Most elements inside of your document have a ref attribute, which facilitates the use of useRef to reference elements inside of your HTML.</li>
<li>refs created using createRef are not persisted between re-renders. A new ref is always created whenever the component is re-rendered.</li>
<li>Updating a ref value is considered a side effect</li>
</ul>
<p>This is the reason why you want to update your ref value in event handlers and effects and not during rendering</p>
<ul>
<li>Ex. Imagine we have a list of users. When we click one, it logs out the username after 1 second. Now imagine that we click on a user, then click on another before the <code>console.log</code> occurs.
In this scenario, class components would log out user2, while functional components would log out user1.
<pre><code>- This shows that functional components attach the call made to the user selected at the time. If we want to make a functional component that behaves like a class, we can use a ref, which is a value that is shared between all renders (in this sense it's sort of like an instance variable) &#x3C;-- (in retrospect I think this should read "static variable", since it exists across all renders, similar to how static variables exist across all instances of that class; however this information came from React docs)
</code></pre>
</li>
</ul>
<p>ref QUESTION
I'm hoping someone can help me understand Refs and their use in React. To be clear, I have a decent high-level understanding of them. For instance, I understand that they are an escape hatch from the regular re-rendering lifecycle of react components. We can use them to access DOM nodes directly, and we can use <code>useRef</code> to get a value that persists underneath the re-rendering nature of components.</p>
<p>However, I struggle to see how this relates to the use of refs in the modal library I'm using (<code>react-native-modalize</code>). This library exports a component called <code>&#x3C;Modalize /></code> which wraps a component, putting it in a modal. In addition to others, <code>&#x3C;Modalize /></code> takes in 2 props: <code>ref</code> and <code>contentRef</code>. <code>ref</code> lets us control the modal via 2 methods <code>myRef.current.open()</code> and <code>myRef.current.close()</code>. This makes sense, but why do we need refs here? Why couldn't the library be written in a way that we just control the modal with state <code>isOpen</code>/<code>isClosed</code> (perhaps it is an implementation detail rather than the nature of how modals work?). If the value of refs here is supposedly to persist values through successive renders, how does this relate?</p>
<h3 id="forward-ref"><a aria-hidden="true" class="anchor-heading" href="#forward-ref"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Forward Ref</h3>
<ul>
<li>What if we want to take a <strong>ref</strong> that is currently existing in the component and pass it down the tree?
<ul>
<li>ie. we can reference a component rendered by <code>&#x3C;Child /></code> from <code>&#x3C;Parent /></code></li>
<li>ex. we have a <code>&#x3C;Form /></code> and <code>&#x3C;App /></code>. We have a ref defined in <code>App</code> and want to attach it to an input box inside <code>Form</code>. We wrap <code>Form</code> with <code>forwardRef</code>, enabling the component to receive the <code>ref</code>. in <code>Form</code>, we pass the ref to the input. Now, we can control that component from <code>App</code>.</li>
</ul>
</li>
<li>the component that has <code>forwardRef</code> in it is the component that is receiving the ref (ie. the child)</li>
<li><code>forwardRef()</code> will create a component, accepting 2 arguments: <code>props</code> and <code>ref</code> (a regular component just accepts props)</li>
</ul>
<h4 id="example"><a aria-hidden="true" class="anchor-heading" href="#example"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Example</h4>
<p>Imagine we have a CheckoutPage component which renders a PaymentForm. The CheckoutPage handles all logic related to network calls in the app, and PaymentForm handles all form logic, including managing its own state. This is a reasonable separation of concerns. However, what happens if we want to access a piece of state in the parent from the child? Imagine the network call our parent made needed to get the address from the form. The "React Way" of accomplishing this is to bring the form state up one level to live in the parent component. However, this breaks our separation of concerns pattern. We can use an escape hatch forward ref in this circumstance.</p>
<p>Illustration:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">Parent</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> myRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span><span class="token maybe-class-name">Child</span> ref<span class="token operator">=</span><span class="token punctuation">{</span>myRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">Child</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>myState<span class="token punctuation">,</span> setMyState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'This is my state!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token function-variable function">getMyState</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span><span class="token keyword control-flow">return</span> myState<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>myState<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Then you should be able to get myState in the Parent component by calling: <code>myRef.current.getMyState()</code></p>
<h4 id="combined-ref"><a aria-hidden="true" class="anchor-heading" href="#combined-ref"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Combined ref</h4>
<ul>
<li>for low-level UI development, it's common to want to use both a local ref and an external one (<code>forwardRef</code>).</li>
</ul>
<h3 id="uer"><a aria-hidden="true" class="anchor-heading" href="#uer"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>UER</h3>
<p><a href="https://overreacted.io/making-setinterval-declarative-with-react-hooks/">Dan Abramov on refs</a></p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#ref" title="Ref">Ref</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#forward-ref" title="Forward Ref">Forward Ref</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#example" title="Example">Example</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#combined-ref" title="Combined ref">Combined ref</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#uer" title="UER">UER</a></div></div></div></div></div></div></div></div></div></main><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></section></section></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"xLeJix4672o4VYu5PYkNp","title":"Ref","desc":"","updated":1616950247168,"created":1615070265050,"custom":{},"fname":"react.lang.ref","type":"note","vault":{"fsPath":"../main/tech","name":"tech"},"contentHash":"826bb0ba80755ce6afb68bfa8031c455","links":[],"anchors":{"ref":{"type":"header","text":"Ref","value":"ref","line":8,"column":0,"depth":2},"forward-ref":{"type":"header","text":"Forward Ref","value":"forward-ref","line":37,"column":0,"depth":3},"example":{"type":"header","text":"Example","value":"example","line":44,"column":0,"depth":4},"combined-ref":{"type":"header","text":"Combined ref","value":"combined-ref","line":61,"column":0,"depth":4},"uer":{"type":"header","text":"UER","value":"uer","line":64,"column":0,"depth":3}},"children":[],"parent":"734beb81-47b0-41b5-a964-fe05af534458","data":{}},"body":"\u003ch1 id=\"ref\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#ref\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eRef\u003c/h1\u003e\n\u003ch2 id=\"ref-1\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#ref-1\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eRef\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eRef - a mutable value that is shared by all component renders.\n\u003cul\u003e\n\u003cli\u003eThink of a ref as a piece of state that doesn't abide by the same re-rendering rules that apply to normal state.\u003c/li\u003e\n\u003cli\u003ea ref can be a function or an object\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eex. Imagine we had 2 counters: one made with state, and the other with refs. As expected, when we increment the state count, the component understands that it needs to re-render, so it does so and reads in the new value of count. When we increment the ref count however, the component understands that it should not update, so we end up still seeing the old value, even though underneath the hood, the count has still risen. Since nothing has caused the component to re-render, this value will remain static. Now imagine that we increment the state count. React will recognize that an updated state means that it needs to re-render. Upon doing so, the current value of the ref will be read.\u003c/li\u003e\n\u003cli\u003etraditionally, refs were meant to let you directly access an html element.\n\u003cul\u003e\n\u003cli\u003eex. focus an input field\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eThe \u003ccode\u003euseRef()\u003c/code\u003e hook helps create mutable variables inside a functional component that won’t update on every render.\u003c/li\u003e\n\u003cli\u003ea ref can be used when the \"React-way\" of interacting with children (ie. Passing props) doesn't cut it, or we want to manually access DOM nodes or React elements created in the render method\u003c/li\u003e\n\u003cli\u003eThe variables created with useRef() persists in between component renders (like state).\u003c/li\u003e\n\u003cli\u003eThe nature of refs is that we can change the value of the ref, and it will not cause the component to re-render.\u003c/li\u003e\n\u003cli\u003eRefs have a value called \u003ccode\u003e.current()\u003c/code\u003e, which gives us the value of the ref in the current rendering of the component.\u003c/li\u003e\n\u003cli\u003euse refs To manage focus, text selection, or media playback\u003c/li\u003e\n\u003cli\u003eMost elements inside of your document have a ref attribute, which facilitates the use of useRef to reference elements inside of your HTML.\u003c/li\u003e\n\u003cli\u003erefs created using createRef are not persisted between re-renders. A new ref is always created whenever the component is re-rendered.\u003c/li\u003e\n\u003cli\u003eUpdating a ref value is considered a side effect\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis is the reason why you want to update your ref value in event handlers and effects and not during rendering\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eEx. Imagine we have a list of users. When we click one, it logs out the username after 1 second. Now imagine that we click on a user, then click on another before the \u003ccode\u003econsole.log\u003c/code\u003e occurs.\nIn this scenario, class components would log out user2, while functional components would log out user1.\n\u003cpre\u003e\u003ccode\u003e- This shows that functional components attach the call made to the user selected at the time. If we want to make a functional component that behaves like a class, we can use a ref, which is a value that is shared between all renders (in this sense it's sort of like an instance variable) \u0026#x3C;-- (in retrospect I think this should read \"static variable\", since it exists across all renders, similar to how static variables exist across all instances of that class; however this information came from React docs)\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eref QUESTION\nI'm hoping someone can help me understand Refs and their use in React. To be clear, I have a decent high-level understanding of them. For instance, I understand that they are an escape hatch from the regular re-rendering lifecycle of react components. We can use them to access DOM nodes directly, and we can use \u003ccode\u003euseRef\u003c/code\u003e to get a value that persists underneath the re-rendering nature of components.\u003c/p\u003e\n\u003cp\u003eHowever, I struggle to see how this relates to the use of refs in the modal library I'm using (\u003ccode\u003ereact-native-modalize\u003c/code\u003e). This library exports a component called \u003ccode\u003e\u0026#x3C;Modalize /\u003e\u003c/code\u003e which wraps a component, putting it in a modal. In addition to others, \u003ccode\u003e\u0026#x3C;Modalize /\u003e\u003c/code\u003e takes in 2 props: \u003ccode\u003eref\u003c/code\u003e and \u003ccode\u003econtentRef\u003c/code\u003e. \u003ccode\u003eref\u003c/code\u003e lets us control the modal via 2 methods \u003ccode\u003emyRef.current.open()\u003c/code\u003e and \u003ccode\u003emyRef.current.close()\u003c/code\u003e. This makes sense, but why do we need refs here? Why couldn't the library be written in a way that we just control the modal with state \u003ccode\u003eisOpen\u003c/code\u003e/\u003ccode\u003eisClosed\u003c/code\u003e (perhaps it is an implementation detail rather than the nature of how modals work?). If the value of refs here is supposedly to persist values through successive renders, how does this relate?\u003c/p\u003e\n\u003ch3 id=\"forward-ref\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#forward-ref\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eForward Ref\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eWhat if we want to take a \u003cstrong\u003eref\u003c/strong\u003e that is currently existing in the component and pass it down the tree?\n\u003cul\u003e\n\u003cli\u003eie. we can reference a component rendered by \u003ccode\u003e\u0026#x3C;Child /\u003e\u003c/code\u003e from \u003ccode\u003e\u0026#x3C;Parent /\u003e\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eex. we have a \u003ccode\u003e\u0026#x3C;Form /\u003e\u003c/code\u003e and \u003ccode\u003e\u0026#x3C;App /\u003e\u003c/code\u003e. We have a ref defined in \u003ccode\u003eApp\u003c/code\u003e and want to attach it to an input box inside \u003ccode\u003eForm\u003c/code\u003e. We wrap \u003ccode\u003eForm\u003c/code\u003e with \u003ccode\u003eforwardRef\u003c/code\u003e, enabling the component to receive the \u003ccode\u003eref\u003c/code\u003e. in \u003ccode\u003eForm\u003c/code\u003e, we pass the ref to the input. Now, we can control that component from \u003ccode\u003eApp\u003c/code\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ethe component that has \u003ccode\u003eforwardRef\u003c/code\u003e in it is the component that is receiving the ref (ie. the child)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eforwardRef()\u003c/code\u003e will create a component, accepting 2 arguments: \u003ccode\u003eprops\u003c/code\u003e and \u003ccode\u003eref\u003c/code\u003e (a regular component just accepts props)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"example\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#example\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eExample\u003c/h4\u003e\n\u003cp\u003eImagine we have a CheckoutPage component which renders a PaymentForm. The CheckoutPage handles all logic related to network calls in the app, and PaymentForm handles all form logic, including managing its own state. This is a reasonable separation of concerns. However, what happens if we want to access a piece of state in the parent from the child? Imagine the network call our parent made needed to get the address from the form. The \"React Way\" of accomplishing this is to bring the form state up one level to live in the parent component. However, this breaks our separation of concerns pattern. We can use an escape hatch forward ref in this circumstance.\u003c/p\u003e\n\u003cp\u003eIllustration:\u003c/p\u003e\n\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eParent\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e myRef \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseRef\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eChild\u003c/span\u003e ref\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003emyRef\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eChild\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eforwardRef\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eprops\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ref\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003emyState\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e setMyState\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'This is my state!'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003euseImperativeHandle\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eref\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token function-variable function\"\u003egetMyState\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e myState\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003emyState\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen you should be able to get myState in the Parent component by calling: \u003ccode\u003emyRef.current.getMyState()\u003c/code\u003e\u003c/p\u003e\n\u003ch4 id=\"combined-ref\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#combined-ref\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eCombined ref\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003efor low-level UI development, it's common to want to use both a local ref and an external one (\u003ccode\u003eforwardRef\u003c/code\u003e).\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"uer\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#uer\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eUER\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://overreacted.io/making-setinterval-declarative-with-react-hooks/\"\u003eDan Abramov on refs\u003c/a\u003e\u003c/p\u003e","noteIndex":{"id":"olZIVfSs2uLLr3BppFh4K","title":"Root","desc":"","updated":1618676699718,"created":1615482407722,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"../main/tech","name":"tech"},"contentHash":"777fb4dab9bcf63cbfe772245d7e4871","links":[],"anchors":{"digital-garden":{"type":"header","text":"Digital Garden","value":"digital-garden","line":8,"column":0,"depth":1}},"children":["zFMjbn3xihVNHjUIdZCD1","IK6NOKemuDjhfstJBovKL","RS8qp1GxwtiJopCUHTTtq","ZaTr28eWk1DrXOEsc1YVb","Vi0WYVLZunVM9iR8XZJn3","ngAbg7gluvbt1bY1UIRsi","RCPPXSakm5TvKka8kOmVp","MPx8ykTP57I40WTZvTP7f","ZU5WmdTG1bHoE8RcmZXZG","jqWiyYJff92RjXuUQt9PQ","KihijM8OQvZ4pASkkhqzL","F9vyqvls3OBCujtukqKhy","facc2b01-755a-409f-99f6-57bef2d1501f","m5ov42Vm6mR7RQWTvl1NW","YYt62mSW964cwb5nP0hva","PZxxZ4iESzSlbbHJKxuAZ","UDu62Pa6BaRqlG8uGoMhy","nMCtMXVvjBsJk3iw1zoIO","ANfx9Z4a6ZA0uJuSHtbIJ","BkG557LKUYbH1DnxprEVT","1TaH8zDTM98FZ9SYaeXLM","dc79799f-a55d-48ab-a8be-c48adb1b19c0","f6feef57-b8f5-451f-a09a-7b63f6a07183","4sz47Y0LKs1Si73rWtyyh","5a9fb1df-478e-4687-9be0-5cb97e61ec57","1374e9e9-1cbc-4e1f-b1ca-66b8569533dd","f529cc34-aba0-45ca-ad7e-02ddda318941","0zcauha3il2NqtxZazIo7","9bbd6f68-03b2-41f4-92e4-2ca313e8b450","5a2ab598-fa7e-4471-8bda-9f5831b679ae","uV6w4mZPoohWyZV4Xaad0","RgE0mZLaUjPftFPZsiAoe","mytCOts26Pidush65tdRW","fwUzxfLSPMH1eL8oBoLWx","TbW7PM9bg1y5TGkiWwQ8b","xiSIDeEtIc8X0lpUQlppI","0jxgntiLNHWFuCbzqtFGF","GkdMprLUe4QQULBxmGN6V","4SYc6v5hxY5g6Ip6kjpwO","fqVQpS9FBiXgKsZX3R3sJ","L5JUZlGAGvTxrsEBB7DY8","963c4b54-02bd-4943-a15f-52cf59ffd0f4","TeTedoeS2LdHPR632eCpM","e65188a1-177e-4ab2-99f9-75f85d537621","fajYnbVhCRDi74xn0H30R","bArGdGwqo3iFkyKMyE7qR","4Dcp7gbEVoLLgfu7bXFai","5d700782-fb81-416e-83f9-5dd88260e350","zubgzhNFE6KlTgXcjTz6O","8lpdfWa0cbSq1XJQbcYcY","17I8ZksXvqCH1mRtZDjHp","kF916Ow84qpJJeMRkWMIo","tMLkLcrIHHBz56xVmBLkP","CSePBQ6q7qhowKESqVwt7","laZ4OfLhZNK1Kuy6GaWUr","z5IJblOknQhMzZ5QZh4ye","N36FHxfxzwJfxDY3miWyX","3bb25f58-2b50-4fa3-af55-48ea9f88a081","aOqNcxZh8qN4MoBJcvGTc","u93Rz4fEWGu6VBR30Zraf","9hjMHnKvYT4jLKvuDSXaV","LgW7mTIALODoXc54B3p6S","UYPxfHBFWX7fb6hHU5bB6","qxSOd6SPN8qf9ZUojVFDX","WQoMTf6VXBaxCgksXAVsj","2Mw4XgfyCHXHNOX5yoCIY","UFrwsXzC1yr7Ge8FF8Vbo","a8edc4ac-028b-40ec-872a-e4a005b04b2a","0XJqmcdtcMZu66glBI5O8","lK8r8BXS4ThiUTe4xKIZe","93de42ca-53ea-460a-baa7-b9ec5c47cb1e","Rxs2jaGpdFzqYtP7lAJFJ","aO8W81Z0PyIb6Hs7nOHPW","I01hENHnh8Tqu3Ok8sLzG","evqsPNutOaZ8hcBCqxFQu","zhhxcjZUHdU8uRLwGb9Zh","G1aFACZB2ooWGMGwyd3ZW","YWy1C4tgoaCcw1m8JJsr7","Szj3o5iaNxPpesiCqwrbu","XhvCDW3fIw6h6MhY5ticq","Q70g7SusFZBQXzkuQifv4","AzfWDH3wp7jFpL2EYxBcW","y0fwpZ9qMqirsLiFyOciU","ZF8xj8wwDUqKlrwTrCFZ1","tAJvhqhdfyZZa87QHq1TU","4hRmipi8lxpBLyzWu5JVB","iTg0C7QjvnmqBZeEigJNs","3babc3d2-79ae-470a-9c06-ab8bba2e684e","bF3UsMFya3fMeXWDspVov","ULkfbL9WpktbVYnzhl6Jw","PpNOO8JYWe6dM8wruSa7x","di40pCxDn7IiqE8lFdD46","rmW0mkerqV35I8QPji6lM","3IFIK1ByzeIxZCByryGLN","iImkYAKfkw3beAl6pLbDn","tho65KN0ZpjQlVvP1fEzM","ecDe8DNWrkeQTwpTEvHje","Yqhdd9mSJGN7OJOeyoSD2","NEhsoOfR7J6o01ielAuUm","Ws5tah8tpeyn9tK8VBTg8","Bqpifx2HX3vjLhX9yvhTV","gWAg15uBJgkS2B0wcpMAa","l7V3v2ep1YdDCt7DOr7Ci","yM2PJBdqJnHpD63cPA6sW","qn0bre7eLbi3QMbCfWkUi","fSu0KxFL41IRouotqmbHs","0gtg24Mj1a1bQFPRGQNlO","7iQPBMltLPLbFEz2qbjPu","yoh4pwoXcfELInGKRdYf6","dCGCWXgAmiOZXbdULT1m6","jMavlje07sNa6hSEIE8WA","Xxm0JE4dKHxrQAaZfzvxD","PAEBZCyFBZJyR7OoMZ41E","PQ6km8RgRCuyICBPOYz8f","2bhftt8rGuxYu4pFgNqru","hjYIZpHQWuXfeEoGeJEKW","K2M9bQqVq2eQfm29eslKL","X8obW1iKwYsvNgKWGyCzy","yJwSC7hqYIezTFHf5i0Ev","c4Z7ETcOHUILRMH32Sfjw","qiR6dIu857b9M9kTqjOyK","8vflbCVkwZtYcqdDDTNAz","Ku1OgHMhELajzo61Gx7ye","LUrfhDWo8wuwZu7CN9TV8","osu6JGOnvXJ5gt3tpqWZY","1a6173cd-cf13-4b34-a522-8350bf9a364f","ZgCUp366YrF2Tyky2NT73","S2sBltrPfd8a7ICuD7CuH","oWCuBXOg6JWfZzjmKxmNl","jOmhZ8ovLYTPbpM1vqSDx","FraC6xzLy1ei91l1ICyc9","6ceBas2RE9Q4787GDngH7","734cd78d-0bc9-426b-803d-1efc84dfffe5","k4Bb09px6r0FxIRs49SXV","oaG3H1S9IUBO644nGZigu","Ka7agQJkUMRSWN0uFdkWK","si3z090WsiLasMhJBa1Az","ljKAVERmdEiKLK9hXGKBm","LIcuGYV0DDt1VWbvH6Sed","MgUSrpNCIwDOW4fX3vPOF","bZumdyapJ2H0wWWOmJ45i","QHXEIyeZGIGMVi5Q52UWI","i5Fya3Vzzm0rBT0ctByuo"],"parent":null,"data":{},"body":"\n# Digital Garden\n\nThis Wiki of Personal Information is organized according to domains and their\nsub-domains, along with specific implementation of those domains.\n\nFor instance, Git itself is a domain. Sub-domains of Git, would be `commit`,\n`tags`, `reflog` etc. implementations of each of those could be `cli`, `strat`\n(strategies), `inner` etc.\n\nThe goal of the wiki is to present data in a manner that is from the perspective\nof a querying user. Here, a user is a programmer wanting to get key information\nfrom a specific domain. For instance, if a user wants to use postgres functions\nand hasn't done them in a while, they should be able to query\n`postgres.functions` to see what information is available to them.\n\nThis wiki has been written with myself in mind. While learning each of these\ndomains, I have been sensitive to the \"aha\" moments and have noted down my\ninsights as they arose. I have refrained from capturing information that I\nconsidered obvious or otherwise non-beneficial to my own understanding.\n\nThe ability I hope to gain from this wiki is the ability to step away from any\ngiven domain for a long period of time, and be able to be passably useful for\nwhatever my goals are within a short period of time. Of course, this is all\nvague sounding, and really depends on the domain, along with the ends I am\ntrying to reach.\n\nTo achieve this, the system should be steadfast to:\n- be able to put information in relatively easily, without too much thought\n\trequired to make that determination.\n- be able to extract the information that we need, meaning there is a\n\thigh-degree in confidence in the location of the information. The idea is\n\tthat information loses a large amount of its value when it is unfindable.\n\tTherefore, a relatively strict ideology should be used when determining\n\twhere a piece of information belongs.\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":3,"useFMTitle":true,"useNoteTitleForLink":true,"noLegacyNoteRef":true,"mermaid":true,"useKatex":true,"dev":{"enablePreviewV2":true},"site":{"assetsPrefix":"/Digital-Garden","siteUrl":"https://tycholiz.github.io","copyAssets":true,"siteHierarchies":["root"],"siteRootDir":"docs","usePrettyRefs":true,"title":"Dendron","description":"Publishable tech notes","duplicateNoteBehavior":{"action":"useVault","payload":["tech"]},"siteLastModified":true,"gh_edit_branch":"main","usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_edit_link":true,"gh_edit_link_text":"Edit this page on GitHub","gh_root":"docs/","gh_edit_view_mode":"edit","writeStubs":true,"siteIndex":"root"},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{}},"workspace":{"dendronVersion":"0.67.1","vaults":[{"fsPath":"../main/tech","name":"tech"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"enableUserTags":true,"enableHashTags":true},"usePrettyRefs":true}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"xLeJix4672o4VYu5PYkNp"},"buildId":"s-Pdpb0Y8fVIEUakhzEMN","assetPrefix":"/Digital-Garden","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>