<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  
  <title>Rebase - Dendron</title>
  

  <link
    rel="shortcut icon"
    href="https://tycholiz.github.io/Digital-Garden/favicon.ico"
    type="image/x-icon"
  />
  <link
    rel="stylesheet"
    href="https://tycholiz.github.io/Digital-Garden/assets/css/just-the-docs-default.css"
  />
  <script
    type="text/javascript"
    src="https://tycholiz.github.io/Digital-Garden/assets/js/just-the-docs.js"
  ></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
    integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
    crossorigin="anonymous"
  />
  <script
    type="text/javascript"
    src="https://tycholiz.github.io/Digital-Garden/assets/js/vendor/lunr.min.js"
  ></script>
  
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   
  
<meta name="description" content="Publishable code notes">
<meta name="author" content="">

<link rel="canonical" href="https://tycholiz.github.io/notes/e9956de4-5207-4565-a279-52ef4620e836.html">

<meta property="og:type" content="article">
<meta property="og:url" content="https://tycholiz.github.io/notes/e9956de4-5207-4565-a279-52ef4620e836.html">
<meta property="og:description" content="Publishable code notes">
<meta property="og:image" content="https://tycholiz.github.ioundefined">

<meta name="twitter:card" content="summary">

<meta name="twitter:url" content="https://tycholiz.github.io/notes/e9956de4-5207-4565-a279-52ef4620e836.html">
<meta name="twitter:description" content="Publishable code notes">
<meta name="twitter:image" content="https://tycholiz.github.ioundefined">


  <meta property="og:title" content="Rebase - Dendron" />
  <meta name="twitter:title" content="Rebase - Dendron" />
  
</head>


<body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
      </symbol>
      <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
          <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </symbol>
      <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
          <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </symbol>
      <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </symbol>
      <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
        </svg>
      </symbol>
    </svg>

    <div class="side-bar">
      <div class="site-header">
        <a href="https://tycholiz.github.io/Digital-Garden" class="site-title lh-tight">
  Dendron

 </a>
        <a href="#" id="menu-button" class="site-button">
          <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
        </a>
      </div>

      <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      </nav>
      <footer class="site-footer">
        üå± with üíï using <a href="https://www.dendron.so/"> Dendron üå≤ </a>
      </footer>
    </div>
    <div class="main" id="top">
        <div id="main-header" class="main-header">
          
            <div class="search">
              <div class="search-input-wrap">
                <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Dendron" aria-label="Search Dendron" autocomplete="off">
                <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
              </div>
              <div id="search-results" class="search-results"></div>
            </div>
          
          
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        
          <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://tycholiz.github.io/Digital-Garden">Root</a></li><li class="breadcrumb-nav-list-item"><a href="https://tycholiz.github.io/Digital-Garden/notes/0628397e-fef6-4f0c-8608-1638506393d3.html">Git</a></li><li class="breadcrumb-nav-list-item">Rebase</li></ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">

        
        

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

        

        <script>
          $(function () {
            $('[data-toggle="popover"]').popover({html: true})
          })
        </script>

        

<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Rebase">
    
    <meta itemprop="datePublished" content="2021-03-26T11:57:19+00:00">
    <meta itemprop="dateModified" content="2021-04-16T10:16:51+00:00">

    <div class="page__inner-wrap">

      

      <section class="page__content" itemprop="text">

        

        <h1 id="rebase"><a aria-hidden="true" class="anchor-heading" href="#rebase"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Rebase</h1>
<h1 id="overview"><a aria-hidden="true" class="anchor-heading" href="#overview"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Overview</h1>
<p>Rebase is an alternate way to get commits from a feature branch onto a master branch</p>
<ul>
<li>with <code>git merge</code>, we take all of the commits on the feature branch and try and jam them together with the commits of the master branch, in order to make a new commit (the merge commit).</li>
<li>with <code>git rebase</code>, we take all of the commits from the current branch and move them on top of another. This involves rebasing first, then doing a regular merge (which will be fast-forward, since the base commit will now be a direct ancestor)
<ul>
<li>When we run <code>git rebase master</code> from our feature branch, we say "hey master, I want to take all the work I've done so far and make it look like it was built <em>directly</em> on top of all of the work that <em>you</em> have"</li>
</ul>
</li>
</ul>
<p>If you're <code>rebase</code>ing, you will always have to <code>--force</code> when you push, because rebase rewrites history‚Äî That's simply how it works. Rewritten history isn't going to fast-forward on top of that same history by definition.</p>
<p>As the name suggests, rebase exists to change the base of a branch (ie. the origin commit). We do this by replaying a series of commits on top of a new base.</p>
<ul>
<li>
<p>This is mostly needed when a series of local commits is deemed to start from an obsolete base (put another way, our local master is very out of sync with origin/master)</p>
</li>
<li>
<p>behind the scenes, git is duplicating the commits of the feature branch, putting them on top of the master branch, and then blowing away those original feature branch's commits (hence why they are greyed out in the following image).</p>
<ul>
<li>therefore, in a sense it is rewriting history, as evidenced by the fact that the duplicated commits have a different SHA than the originals</li>
</ul>
</li>
<li>
<p>Because rebase rewrites history, it's important that we pull all remote changes to our local master branch before rebasing, so that we are reanchoring our feature branch's commits to the current version of the code.</p>
</li>
<li>
<p>ex. we are on branch <code>about</code>, which has diverged from <code>master</code>. We want to incorporate changes from master into <code>about</code>. From <code>about</code>, we run <code>git rebase master</code>:</p>
</li>
</ul>
<h2 id="process"><a aria-hidden="true" class="anchor-heading" href="#process"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Process</h2>
<p>Git always squashes a newer commit into an older commit or ‚Äúupward‚Äù as viewed on the interactive rebase todo list, that is into a commit on a previous line.</p>
<ul>
<li>This means if commit1 is a <code>WIP</code> commit, and commit2 is the one we want to keep (along with changes from commit1), then we must actually <code>squash</code> commit2 into commit1. Doing so will allow us modify the commit message (now a combination of the messages from commit1 and commit2) before rewriting the history.</li>
</ul>
<h3 id="behind-the-scenes"><a aria-hidden="true" class="anchor-heading" href="#behind-the-scenes"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Behind the Scenes</h3>
<ol>
<li>Git will checkout the upstream branch and copy all the changes you've done since you last merged, placing them on the tip of the upstream branch.
<ul>
<li>ex. in the above image, to an outside observer it would seem that you had checked out the upstream branch from <strong><em>a</em></strong>b and then done your changes.</li>
<li>note: here upstream most likely is origin/master or simply master, but it could be any branch we are "merging" into.</li>
</ul>
</li>
<li>Git produces a series of patch files of your work and starts applying them to the upstream branch.
<ul>
<li>consider that these commits are actual copies with different commit SHAs</li>
</ul>
</li>
</ol>
<h3 id="process-1"><a aria-hidden="true" class="anchor-heading" href="#process-1"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Process</h3>
<ol>
<li>when finished with feature branch, pull all remote changes onto master
<ul>
<li>if local master === origin/master, step 2 can be skipped, since it would have no effect anyway</li>
</ul>
</li>
<li>from feature branch, run <code>git rebase master</code>, which will cause our feature branch commits to be anchored against the updated master branch
<ul>
<li>consider that when we checkout a new branch, we have a common base with the branch which we checked out from. Rebasing master here ensures that the remote changes that happened and got merged into master (remotely) are included as part of that anchor.</li>
</ul>
</li>
<li>from master branch, run <code>git rebase feature-branch</code>, copying and placing the commits of the feature branch onto the main branch.</li>
</ol>
<h4 id="conflicts"><a aria-hidden="true" class="anchor-heading" href="#conflicts"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Conflicts</h4>
<ul>
<li>say we are rebasing 8 commits onto the new branch ‚Äî each one could cause a conflict, and we can resolve the conflicts introduced by each commit one by one.
<ul>
<li>fix the file, run <code>git add</code>, then run <code>git rebase --continue</code> (which moves us on to the next patch, until all are completed)</li>
</ul>
</li>
</ul>
<h3 id="when-to-use-rebase"><a aria-hidden="true" class="anchor-heading" href="#when-to-use-rebase"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>When to use rebase</h3>
<ol>
<li>Any time we are working on a long term branch that needs to stay somewhat up to date with master. It is better to keep it as up to date as possible, rather than staying diverged for a long time.
<ul>
<li>ex. Imagine working on an experimental branch and getting blocked at some point. This is a scenario that would cause your branch to diverge from master more and more over time. When it does come time to pick up work again, it would be a good time to rebase to the master branch. The result is that it would look just like you started from there.</li>
</ul>
</li>
<li>Consider that in a perfect world, my coworker and I would have a linear commit history (even though we are developing asynchronously, it makes more sense looking back if we have a straight line of commits). In this ideal world, I would be developing my work off the base of my coworker's work, and vice versa.</li>
<li>Imagine we have a <em>quick-fix</em> branch that we don't want muddying up the history. If master has not been touched since we branched, the ff merge is automatic. However, if master has indeed changed, then we need a way to tweak <em>quick-fix</em> so it becomes a direct descendent of <em>master</em> again.
<ul>
<li>In this scenario, we want our local master to have the same tip as origin/master. This would allow us to do a ff merge, thus avoiding muddying up history.</li>
</ul>
</li>
</ol>
<h3 id="drawbacks-to-rebase"><a aria-hidden="true" class="anchor-heading" href="#drawbacks-to-rebase"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Drawbacks to rebase</h3>
<ul>
<li>doesn't play too well with open source projects, since it becomes hard to trace changes introduced to a codebase.</li>
<li>doesn't work well when working on a shared branch, since commits are rewritten.</li>
<li>only rebase when working on a local branch prior to pushing, or on remote repos where you are the only contributor (ex. for backup purposes).
<ul>
<li>In the second scenario, we'll need to force push (since we replaced its commit history with a fresh one).</li>
<li>Issues arise when other people pull in objects that were orphaned by the rebase process.</li>
</ul>
</li>
</ul>
<h4 id="shared-branches"><a aria-hidden="true" class="anchor-heading" href="#shared-branches"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Shared branches</h4>
<p>Rebase is not a great candidate for shared branches. Because <code>git push --force</code> is a fact of life to the "rebase-way" of Git workflow, we would have to be careful to check if someone else has pushed to the remote branch first. This is why we should use <code>--force-with-lease</code>, so that we cannot overwrite commits that have been pushed already to that remote branch. If there have been, we will get errors, and we can <code>git pull --rebase</code> to incorporate those changes, before force pushing again.</p>
<hr>
<h2 id="children"><a aria-hidden="true" class="anchor-heading" href="#children"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Children</h2>
<ol>
<li><a href="https://tycholiz.github.io/Digital-Garden/notes/abbc7d34-b06d-42f9-976e-715428fb2386.html">Cook</a></li>
</ol><span id="navId" data="e9956de4-5207-4565-a279-52ef4620e836"></span>

                
      </section>

      
    </div>

    
  </article>

  
  
</div>


        
          <hr>
          <footer>
            
            

            
                
              </div>
          </footer>
        
    </div>
</div>


  

  <div class="search-overlay"></div>

</div>
</body>
</html>
