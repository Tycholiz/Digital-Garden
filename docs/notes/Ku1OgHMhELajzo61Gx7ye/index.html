<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><title>Terraform</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="The Tech Digital Garden of Kyle Tycholiz"/><meta property="og:title" content="Terraform"/><meta property="og:description" content="The Tech Digital Garden of Kyle Tycholiz"/><meta property="og:url" content="https://tech.kyletycholiz.com/notes/Ku1OgHMhELajzo61Gx7ye/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="11/24/2021"/><meta property="article:modified_time" content="7/7/2022"/><link rel="canonical" href="https://tech.kyletycholiz.com/notes/Ku1OgHMhELajzo61Gx7ye/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/8e7b7e4bce421c0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8e7b7e4bce421c0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3d209faeb64f2f97.js" defer=""></script><script src="/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/_next/static/chunks/main-104451f3d1a5c4bc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6b338472289fe290.js" defer=""></script><script src="/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/_next/static/fo6gubzKP_KV9RZPhaoiQ/_buildManifest.js" defer=""></script><script src="/_next/static/fo6gubzKP_KV9RZPhaoiQ/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="terraform">Terraform<a aria-hidden="true" class="anchor-heading icon-link" href="#terraform"></a></h1>
<h2 id="what-is-it">What is it?<a aria-hidden="true" class="anchor-heading icon-link" href="#what-is-it"></a></h2>
<p>Terraform is a cloud-agnostic <a title="Private" href="https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html" target="_blank" class="private">IaC (Private)</a> solution.</p>
<p>Terraform is split into two parts:</p>
<ul>
<li>One part is the Terraform engine, which understands... 
<ul>
<li>how to read state from a provider</li>
<li>read HCL code</li>
<li>how to get from the state your infrastructure is currently into the state you want your infrastructure to be in.</li>
</ul>
</li>
<li>The other part is the provider, which talks to the infrastructure to find out the current state and make changes using the infrastructure’s API.</li>
</ul>
<h2 id="provisioning-workflow">Provisioning Workflow<a aria-hidden="true" class="anchor-heading icon-link" href="#provisioning-workflow"></a></h2>
<p>There are 3 main CLI commands that involve creating, modifying and destroying infrastructure: <code>plan</code>, <code>apply</code> and <code>destroy</code>.</p>
<p><a href="/notes/Ky3O7oxftnwQbcZlZ0nEe">Terraform CLI</a></p>
<h2 id="terminology">Terminology<a aria-hidden="true" class="anchor-heading icon-link" href="#terminology"></a></h2>
<h3 id="provider">Provider<a aria-hidden="true" class="anchor-heading icon-link" href="#provider"></a></h3>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Provider</span></div>
<a href="/notes/0aidQMXuED5nPrEAqPSwg" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><p>A provider is a connection that allows Terraform to manage infrastructure using an interface (e.g. AWS API)</p>
</div></div><p></p><p></p>
<h3 id="resource">Resource<a aria-hidden="true" class="anchor-heading icon-link" href="#resource"></a></h3>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Resource</span></div>
<a href="/notes/Nt5U2FxZNGStbEcYYBjKE" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><p>A resource represents a piece of real world infrastructure </p>
<p>Examples:</p>
<ul>
<li>an S3 bucket</li>
<li>an EKS (Elastic Kubernetes) cluster</li>
<li>a Postgres <a href="/notes/WRqfLQI6kPDa2M8aIurYo">role</a></li>
</ul>
</div></div><p></p><p></p>
<h3 id="module">Module<a aria-hidden="true" class="anchor-heading icon-link" href="#module"></a></h3>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Module</span></div>
<a href="/notes/zSuIFLNNKKEtLtwhe8nez" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><p>A Terraform module is a set of Terraform configuration files in a single directory that can be considered its own standalone Terraform project.</p>
<ul>
<li>it can therefore...
<ul>
<li>contain its own resources, data sources, locals, etc.</li>
<li>take variables (ie. inputs on a per-module basis)</li>
</ul>
</li>
</ul>
</div></div><p></p><p></p>
<h3 id="data-source">Data source<a aria-hidden="true" class="anchor-heading icon-link" href="#data-source"></a></h3>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Data Source</span></div>
<a href="/notes/mO2rzcwfMls7YDt3r3iGX" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><p>A data source is used to fetch data from a resource that is not managed by the current Terraform project.</p>
<ul>
<li>think of it as a read-only resource that already exists</li>
</ul>
</div></div><p></p><p></p>
<h3 id="local">Local<a aria-hidden="true" class="anchor-heading icon-link" href="#local"></a></h3>
<p>A <code>local</code> is Terraform's representation of a variable.</p>
<ul>
<li>note: not to be confused with Terraform variables.</li>
</ul>
<h3 id="variable">Variable<a aria-hidden="true" class="anchor-heading icon-link" href="#variable"></a></h3>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Variables</span></div>
<a href="/notes/456RSqs23EDalVWwggIy1" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><p>A variable is set at runtime, allowing us to vary Terraform's behaviour. </p>
<ul>
<li>Therefore, if Terraform were a function, a variable would be an input to the function.</li>
<li>note: not to be confused with <code>locals</code>, which themselves are actually more like variables as used in general programming</li>
</ul>
<pre class="language-hcl"><code class="language-hcl"><span class="token keyword">variable<span class="token type variable"> "bucket_name" </span></span><span class="token punctuation">{</span>
    <span class="token property">type</span> <span class="token punctuation">=</span> string
    <span class="token comment"># describe what this variable is used for</span>
    <span class="token property">description</span> <span class="token punctuation">=</span> <span class="token string">"the name of the bucket we are creating"</span>
    <span class="token property">default</span> <span class="token punctuation">=</span> <span class="token string">"default_bucket_name"</span>
<span class="token punctuation">}</span>

<span class="token keyword">resource <span class="token type variable">"aws_s3_bucket"</span></span> <span class="token string">"bucket"</span> <span class="token punctuation">{</span>
    <span class="token property">bucket</span> <span class="token punctuation">=</span> var.bucket_name
<span class="token punctuation">}</span>
</code></pre>
<p>Variables can be more complex too:</p>
<pre class="language-tfvars"><code class="language-tfvars">instance_map = {
    dev = "t3.small"
    test = "t3.medium"
    prod = "t3.large"
}

environment_type = "dev"
</code></pre>
<p>And referenced like:</p>
<pre class="language-hcl"><code class="language-hcl"><span class="token keyword">variable<span class="token type variable"> "instance_map" </span></span><span class="token punctuation">{</span>
    <span class="token property">type</span> <span class="token punctuation">=</span> map(string)
<span class="token punctuation">}</span>
<span class="token keyword">variable<span class="token type variable"> "environment_type" </span></span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">output<span class="token type variable"> "selected_instance" </span></span><span class="token punctuation">{</span>
    <span class="token property">value</span> <span class="token punctuation">=</span> var.instance_map<span class="token punctuation">[</span>var.environment_type<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="types">Types<a aria-hidden="true" class="anchor-heading icon-link" href="#types"></a></h4>
<ul>
<li><code>string</code></li>
<li><code>bool</code></li>
<li><code>number</code></li>
<li><code>list(&#x3C;TYPE>)</code></li>
<li><code>set(&#x3C;TYPE>)</code>
<ul>
<li>each value is unique</li>
</ul>
</li>
<li><code>map(&#x3C;TYPE>)</code></li>
<li><code>object()</code>
<ul>
<li>like a map, but values can be different types</li>
</ul>
</li>
<li><code>tuple([&#x3C;TYPE>, …])</code>
<ul>
<li>number of values and order is preserved</li>
</ul>
</li>
<li><code>any</code>
<ul>
<li>unlike <code>any</code> type from <a href="/notes/S2sBltrPfd8a7ICuD7CuH">Typescript</a>; this <code>any</code> allows Terraform to infer based on the actual value.</li>
</ul>
</li>
</ul>
<h4 id="providing-variables-4-ways">Providing variables (4 ways)<a aria-hidden="true" class="anchor-heading icon-link" href="#providing-variables-4-ways"></a></h4>
<ol>
<li>
<p>When we run <code>terraform init</code> and <code>terraform apply</code>, we will be prompted to provide a value for the variable(s).</p>
</li>
<li>
<p>pass the value with:</p>
</li>
</ol>
<pre class="language-sh"><code class="language-sh">terraform apply -var bucket_name=my_bucket
</code></pre>
<ol start="3">
<li><code>export</code> environment variables in the terminal prefixed with <code>TF_VAR_</code>:</li>
</ol>
<pre class="language-sh"><code class="language-sh">export TF_VAR_bucket_name=my_bucket
</code></pre>
<ol start="4">
<li>create a <code>terraform.tfvars</code> file (or <code>&#x3C;ANYNAME>.auto.tfvars</code>):</li>
</ol>
<pre class="language-tfvars"><code class="language-tfvars">bucket_name = "my_bucket"
</code></pre></div></div><p></p><p></p>
<h3 id="state">State<a aria-hidden="true" class="anchor-heading icon-link" href="#state"></a></h3>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">State</span></div>
<a href="/notes/NsY5hHUmyMhwB61BfihyD" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><p>State is the place where Terraform stores of all of the resources (and their metadata) it has created.</p>
<ul>
<li>run <code>terraform state list</code> to see all resources existing in state.</li>
</ul>
<p>This state is used by Terraform to work out how changes need to be made.</p>
<p>State is stored in <code>terraform.tfstate</code></p>
<p>If we want to move resource creation from one project to another, state needs to be manipulated directly </p>
<ul>
<li>
<p>this can be handled by (example uses a AWS VPC resource)</p>
<ol>
<li>running <code>terraform state rm aws_vpc.my_vpc</code> command, which will remove the resource from state (so Terraform is no longer managing it), but will not delete the resource in the cloud.</li>
<li>in the new project, copy+paste over the resource and run <code>terraform import aws_vpc.my_pc &#x3C;VPC_ID></code></li>
<li>run <code>terraform apply</code></li>
</ol>
</li>
<li>
<p>some resources do not support <code>import</code>. In this case, use <code>terraform state mv</code></p>
</li>
</ul>
<h3 id="remote-state">Remote state<a aria-hidden="true" class="anchor-heading icon-link" href="#remote-state"></a></h3>
<p>Multiple people working on the same Terraform project can introduce a lot of complexity, since a local state file is used to store a record of what has been created. If we run terraform commands on a second machine, it will try to create double the resources.</p>
<ul>
<li>to get around this issue, we can store state in a remote location (e.g. in an S3 bucket)</li>
</ul>
<p>We specify the remote state location using the <code>backend</code> keyword. Here we are using an S3 bucket:</p>
<pre class="language-tf"><code class="language-tf"># state.tf
backend "s3" {
    bucket = "&#x3C;bucket-name>"
    key = "my-project.state"
    region = "us-west-1"
}
</code></pre>
<p>The remote state backend needs to support "locking", which prevents changes to the state while Terraform commands are running.</p>
<p>A good idea is to use S3 bucket versioning so we can time travel through different Terraform states.</p></div></div><p></p><p></p>
<h3 id="workspaces">Workspaces<a aria-hidden="true" class="anchor-heading icon-link" href="#workspaces"></a></h3>
<p>Workspaces solve the problem "how do we create multiple environments using the same code?"</p>
<p><code>terraform.workspace</code> is a special variable that resolves to the current workspace we are running in.</p>
<p>Unless we explicitly specify, we are running in the <code>default</code> workspace.</p>
<p>Local workspaces are stored in <code>terraform.tfstate.d/</code></p>
<ul>
<li>each workspace has its own state</li>
</ul>
<h4 id="cli">CLI<a aria-hidden="true" class="anchor-heading icon-link" href="#cli"></a></h4>
<ul>
<li>List workspaces -  <code>terraform workspaces list</code></li>
<li>Create new workspace - <code>terraform workspace new development</code></li>
<li>Switch workspaces - <code>terraform workspace select development</code></li>
</ul>
<h3 id="terraform-cloud">Terraform Cloud<a aria-hidden="true" class="anchor-heading icon-link" href="#terraform-cloud"></a></h3>
<p>Terraform cloud provides us with a method to change our input variables at the top level, meaning each set of infra (for each environment) can have its own set of variables.</p>
<p>With it, we:</p>
<ol>
<li>create a workspace </li>
<li>point it at a source control repo containing your Terraform code</li>
<li>set the variables for that workspace</li>
</ol>
<h3 id="lifecycle">Lifecycle<a aria-hidden="true" class="anchor-heading icon-link" href="#lifecycle"></a></h3>
<p>Each resource has a special attribute block called <code>lifecycle</code> that gives us extra control.</p>
<p>It allows us to:</p>
<ul>
<li><code>create_before_destroy</code>, to ensure a new resource is created prior to deleting the old one</li>
<li><code>prevent_destroy</code>, to prevent Terraform from ever deleting the resource, so long as the property exists</li>
</ul>
<pre class="language-tf"><code class="language-tf">lifecycle {
  prevent_destroy = true
}
</code></pre>
<h3 id="provisioner">Provisioner<a aria-hidden="true" class="anchor-heading icon-link" href="#provisioner"></a></h3>
<p>Provisioners allow us to run a script (remotely or locally) after a resource has been created.</p>
<ul>
<li>provisioners allow us to step in and solve problems ourselves when they are not solved out of the box by the provider we are using.</li>
<li>because provisioners are imperative, they are seen as a last resort approach to solving our problem.</li>
</ul>
<hr>
<h2 id="misc">Misc<a aria-hidden="true" class="anchor-heading icon-link" href="#misc"></a></h2>
<h3 id="multi-line-string">Multi-line string<a aria-hidden="true" class="anchor-heading icon-link" href="#multi-line-string"></a></h3>
<p>Multi-line strings are declared between <code>&#x3C;&#x3C;ANYWORD</code> and <code>ANYWORD</code>:</p>
<pre class="language-tf"><code class="language-tf">resource "aws_iam_policy" "my_bucket_policy" {
    name = "my-bucket-policy"

    policy = &#x3C;&#x3C;POLICY
    {
        "Version": "2012-10-17",
        "Statement": [
            {
                "Action": [
                    "s3:ListBucket"
                ],
                "Effect": "Allow",
                "Resource": [
                    "${data.aws_s3_bucket.bucket.arn}"
                ]
            }
        ]
    }
    POLICY
}
</code></pre>
<p>String interpolation (<code>${interpolated_value}</code>) can be used inside a multi-line string.</p>
<ul>
<li>only needed when inside quotes (<code>""</code>)</li>
</ul>
<h3 id="outputting-to-console-stdout">Outputting to console (stdout)<a aria-hidden="true" class="anchor-heading icon-link" href="#outputting-to-console-stdout"></a></h3>
<pre class="language-tf"><code class="language-tf">output "message" {
    value = aws_s3_bucket.my_bucket.id
}
</code></pre>
<p>or we can print all attributes exported by a resource:</p>
<pre class="language-tf"><code class="language-tf">output "all" {
    aws_s3_bucket.my_bucket
}
</code></pre>
<h3 id="folder-structure">Folder structure<a aria-hidden="true" class="anchor-heading icon-link" href="#folder-structure"></a></h3>
<p>All Terraform files should be in a single directory (the Terraform project) at the top level. Any files within subdirectories will be ignored. Conceptually, when we run Terraform commands, everything will be appended into a single file anyway.</p>
<ul>
<li>child directories are used to set up Modules</li>
</ul>
<p>By convention,</p>
<ul>
<li>set up providers in <code>main.tf</code>.</li>
<li>resources named after their type (e.g. <code>sqs.tf</code>, <code>api-gateway.tf</code>)</li>
<li>variables in <code>variables.tf</code></li>
</ul>
<hr>
<h2 id="tools">Tools<a aria-hidden="true" class="anchor-heading icon-link" href="#tools"></a></h2>
<ul>
<li><a href="https://www.runatlantis.io/">Atlantis</a> - Pull Request automation for Terraform
<ul>
<li>purpose is to have improved code review for infra changes.</li>
</ul>
</li>
<li>Terratest - a unit testing framework for Terraform</li>
</ul>
<h2 id="alternatives">Alternatives<a aria-hidden="true" class="anchor-heading icon-link" href="#alternatives"></a></h2>
<ul>
<li>Chef/Puppet - these are configuration management tools. They are designed to configure and manage the already existing infrastructure, while Terraform is designed to set up the infrastructre itself.
<ul>
<li>In other words, Puppet and Chef would be used to configure servers, while Terraform would be used to create the server itself.</li>
</ul>
</li>
<li>Pulumi - This IaC tool uses a programming language (like Typescript) instead of a configuration language.</li>
</ul>
<hr>
<strong>Children</strong>
<ol>
<li><a href="/notes/mO2rzcwfMls7YDt3r3iGX">Data Source</a></li>
<li><a href="/notes/zSuIFLNNKKEtLtwhe8nez">Module</a></li>
<li><a href="/notes/0aidQMXuED5nPrEAqPSwg">Provider</a></li>
<li><a href="/notes/Nt5U2FxZNGStbEcYYBjKE">Resource</a></li>
<li><a href="/notes/NsY5hHUmyMhwB61BfihyD">State</a></li>
<li><a href="/notes/Ky3O7oxftnwQbcZlZ0nEe">Terraform CLI</a></li>
<li><a href="/notes/C84fC8TYNY902iA8f7nCD">Terragrunt</a></li>
<li><a href="/notes/456RSqs23EDalVWwggIy1">Variables</a></li>
</ol>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/notes/KutlqQVGLBAdLTslz3D9A">CDK</a></li>
<li><a href="/notes/7Hd68M5niADEkip4CdU85">IaC (Infrastructure-as-Code)</a></li>
<li><a href="/notes/C84fC8TYNY902iA8f7nCD">Terragrunt</a></li>
<li><a href="/notes/NbGOJJpZuEbf0hXs2UvAB">CloudFormation</a></li>
<li><a href="/notes/OSdV9FvBG3wDbRNLllg0V">AWS Lambda</a></li>
<li><a href="/notes/tn4qi4x8bodysdvtd5rq0f4">SAM</a></li>
<li><a href="/notes/begrl6j3rxln3bcsz87ornn">Xray</a></li>
<li><a href="/notes/lBasXzi1eHzGwL2pEuOv8">GitOps</a></li>
</ul></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#what-is-it" title="What is it?">What is it?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#provisioning-workflow" title="Provisioning Workflow">Provisioning Workflow</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#terminology" title="Terminology">Terminology</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#provider" title="Provider">Provider</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#resource" title="Resource">Resource</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#module" title="Module">Module</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#data-source" title="Data source">Data source</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#local" title="Local">Local</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#variable" title="Variable">Variable</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#state" title="State">State</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#workspaces" title="Workspaces">Workspaces</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#cli" title="CLI">CLI</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#terraform-cloud" title="Terraform Cloud">Terraform Cloud</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#lifecycle" title="Lifecycle">Lifecycle</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#provisioner" title="Provisioner">Provisioner</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#misc" title="Misc">Misc</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#multi-line-string" title="Multi-line string">Multi-line string</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#outputting-to-console-stdout" title="Outputting to console (stdout)">Outputting to console (stdout)</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#folder-structure" title="Folder structure">Folder structure</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#tools" title="Tools">Tools</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#alternatives" title="Alternatives">Alternatives</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"Ku1OgHMhELajzo61Gx7ye","title":"Terraform","desc":"","updated":1657235291989,"created":1637797305761,"custom":{},"fname":"terraform","type":"note","vault":{"fsPath":"../main/tech","name":"tech"},"contentHash":"db8f067f9da7f4ff9c1080b63b4c6e24","links":[{"type":"wiki","from":{"fname":"terraform","id":"Ku1OgHMhELajzo61Gx7ye","vaultName":"tech"},"value":"deploy.IaC","alias":"IaC","position":{"start":{"line":3,"column":31,"offset":46},"end":{"line":3,"column":49,"offset":64},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"deploy.IaC"}},{"type":"wiki","from":{"fname":"terraform","id":"Ku1OgHMhELajzo61Gx7ye","vaultName":"tech"},"value":"terraform.cli","position":{"start":{"line":15,"column":1,"offset":647},"end":{"line":15,"column":18,"offset":664},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"terraform.cli"}},{"type":"ref","from":{"fname":"terraform","id":"Ku1OgHMhELajzo61Gx7ye","vaultName":"tech"},"value":"terraform.provider","position":{"start":{"line":19,"column":1,"offset":694},"end":{"line":19,"column":37,"offset":730},"indent":[]},"xvault":false,"to":{"fname":"terraform.provider","anchorHeader":"summary,1:#*"}},{"type":"ref","from":{"fname":"terraform","id":"Ku1OgHMhELajzo61Gx7ye","vaultName":"tech"},"value":"terraform.resource","position":{"start":{"line":22,"column":1,"offset":745},"end":{"line":22,"column":37,"offset":781},"indent":[]},"xvault":false,"to":{"fname":"terraform.resource","anchorHeader":"summary,1:#*"}},{"type":"ref","from":{"fname":"terraform","id":"Ku1OgHMhELajzo61Gx7ye","vaultName":"tech"},"value":"terraform.module","position":{"start":{"line":25,"column":1,"offset":794},"end":{"line":25,"column":35,"offset":828},"indent":[]},"xvault":false,"to":{"fname":"terraform.module","anchorHeader":"summary,1:#*"}},{"type":"ref","from":{"fname":"terraform","id":"Ku1OgHMhELajzo61Gx7ye","vaultName":"tech"},"value":"terraform.data-source","position":{"start":{"line":28,"column":1,"offset":846},"end":{"line":28,"column":40,"offset":885},"indent":[]},"xvault":false,"to":{"fname":"terraform.data-source","anchorHeader":"summary,1:#*"}},{"type":"ref","from":{"fname":"terraform","id":"Ku1OgHMhELajzo61Gx7ye","vaultName":"tech"},"value":"terraform.variables","position":{"start":{"line":35,"column":1,"offset":1019},"end":{"line":35,"column":25,"offset":1043},"indent":[]},"xvault":false,"to":{"fname":"terraform.variables"}},{"type":"ref","from":{"fname":"terraform","id":"Ku1OgHMhELajzo61Gx7ye","vaultName":"tech"},"value":"terraform.state","position":{"start":{"line":38,"column":1,"offset":1055},"end":{"line":38,"column":21,"offset":1075},"indent":[]},"xvault":false,"to":{"fname":"terraform.state"}},{"from":{"fname":"aws.CDK","id":"KutlqQVGLBAdLTslz3D9A","vaultName":"tech"},"type":"backlink","position":{"start":{"line":5,"column":26,"offset":189},"end":{"line":5,"column":39,"offset":202},"indent":[]},"value":"terraform"},{"from":{"fname":"devops.IaC","id":"7Hd68M5niADEkip4CdU85","vaultName":"tech"},"type":"backlink","position":{"start":{"line":19,"column":3,"offset":1025},"end":{"line":19,"column":26,"offset":1048},"indent":[]},"value":"terraform"},{"from":{"fname":"terraform.terragrunt","id":"C84fC8TYNY902iA8f7nCD","vaultName":"tech"},"type":"backlink","position":{"start":{"line":2,"column":32,"offset":32},"end":{"line":2,"column":45,"offset":45},"indent":[]},"value":"terraform"},{"from":{"fname":"aws.svc.cloud-formation","id":"NbGOJJpZuEbf0hXs2UvAB","vaultName":"tech"},"type":"backlink","position":{"start":{"line":15,"column":53,"offset":855},"end":{"line":15,"column":76,"offset":878},"indent":[]},"value":"terraform"},{"from":{"fname":"aws.svc.lambda","id":"OSdV9FvBG3wDbRNLllg0V","vaultName":"tech"},"type":"backlink","position":{"start":{"line":105,"column":108,"offset":6156},"end":{"line":105,"column":131,"offset":6179},"indent":[]},"value":"terraform"},{"from":{"fname":"aws.svc.sam","id":"tn4qi4x8bodysdvtd5rq0f4","vaultName":"tech"},"type":"backlink","position":{"start":{"line":45,"column":57,"offset":2113},"end":{"line":45,"column":80,"offset":2136},"indent":[]},"value":"terraform"},{"from":{"fname":"aws.svc.xray","id":"begrl6j3rxln3bcsz87ornn","vaultName":"tech"},"type":"backlink","position":{"start":{"line":9,"column":54,"offset":844},"end":{"line":9,"column":67,"offset":857},"indent":[]},"value":"terraform"},{"from":{"fname":"devops.IaC.gitops","id":"lBasXzi1eHzGwL2pEuOv8","vaultName":"tech"},"type":"backlink","position":{"start":{"line":39,"column":78,"offset":3548},"end":{"line":39,"column":101,"offset":3571},"indent":[]},"value":"terraform"}],"anchors":{"what-is-it":{"type":"header","text":"What is it?","value":"what-is-it","line":8,"column":0,"depth":2},"provisioning-workflow":{"type":"header","text":"Provisioning Workflow","value":"provisioning-workflow","line":18,"column":0,"depth":2},"terminology":{"type":"header","text":"Terminology","value":"terminology","line":23,"column":0,"depth":2},"provider":{"type":"header","text":"Provider","value":"provider","line":24,"column":0,"depth":3},"resource":{"type":"header","text":"Resource","value":"resource","line":27,"column":0,"depth":3},"module":{"type":"header","text":"Module","value":"module","line":30,"column":0,"depth":3},"data-source":{"type":"header","text":"Data source","value":"data-source","line":33,"column":0,"depth":3},"local":{"type":"header","text":"Local","value":"local","line":36,"column":0,"depth":3},"variable":{"type":"header","text":"Variable","value":"variable","line":40,"column":0,"depth":3},"state":{"type":"header","text":"State","value":"state","line":43,"column":0,"depth":3},"workspaces":{"type":"header","text":"Workspaces","value":"workspaces","line":46,"column":0,"depth":3},"cli":{"type":"header","text":"CLI","value":"cli","line":56,"column":0,"depth":4},"terraform-cloud":{"type":"header","text":"Terraform Cloud","value":"terraform-cloud","line":61,"column":0,"depth":3},"lifecycle":{"type":"header","text":"Lifecycle","value":"lifecycle","line":69,"column":0,"depth":3},"provisioner":{"type":"header","text":"Provisioner","value":"provisioner","line":82,"column":0,"depth":3},"misc":{"type":"header","text":"Misc","value":"misc","line":89,"column":0,"depth":2},"multi-line-string":{"type":"header","text":"Multi-line string","value":"multi-line-string","line":90,"column":0,"depth":3},"outputting-to-console-stdout":{"type":"header","text":"Outputting to console (stdout)","value":"outputting-to-console-stdout","line":118,"column":0,"depth":3},"folder-structure":{"type":"header","text":"Folder structure","value":"folder-structure","line":132,"column":0,"depth":3},"tools":{"type":"header","text":"Tools","value":"tools","line":143,"column":0,"depth":2},"alternatives":{"type":"header","text":"Alternatives","value":"alternatives","line":148,"column":0,"depth":2}},"children":["Ky3O7oxftnwQbcZlZ0nEe","mO2rzcwfMls7YDt3r3iGX","zSuIFLNNKKEtLtwhe8nez","0aidQMXuED5nPrEAqPSwg","Nt5U2FxZNGStbEcYYBjKE","NsY5hHUmyMhwB61BfihyD","C84fC8TYNY902iA8f7nCD","456RSqs23EDalVWwggIy1"],"parent":"olZIVfSs2uLLr3BppFh4K","data":{}},"body":"\u003ch1 id=\"terraform\"\u003eTerraform\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#terraform\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch2 id=\"what-is-it\"\u003eWhat is it?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-is-it\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eTerraform is a cloud-agnostic \u003ca title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\"\u003eIaC (Private)\u003c/a\u003e solution.\u003c/p\u003e\n\u003cp\u003eTerraform is split into two parts:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eOne part is the Terraform engine, which understands... \n\u003cul\u003e\n\u003cli\u003ehow to read state from a provider\u003c/li\u003e\n\u003cli\u003eread HCL code\u003c/li\u003e\n\u003cli\u003ehow to get from the state your infrastructure is currently into the state you want your infrastructure to be in.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eThe other part is the provider, which talks to the infrastructure to find out the current state and make changes using the infrastructure’s API.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"provisioning-workflow\"\u003eProvisioning Workflow\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#provisioning-workflow\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThere are 3 main CLI commands that involve creating, modifying and destroying infrastructure: \u003ccode\u003eplan\u003c/code\u003e, \u003ccode\u003eapply\u003c/code\u003e and \u003ccode\u003edestroy\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/notes/Ky3O7oxftnwQbcZlZ0nEe\"\u003eTerraform CLI\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"terminology\"\u003eTerminology\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#terminology\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"provider\"\u003eProvider\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#provider\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cdiv class=\"portal-container\"\u003e\n\u003cdiv class=\"portal-head\"\u003e\n\u003cdiv class=\"portal-backlink\"\u003e\n\u003cdiv class=\"portal-title\"\u003eFrom \u003cspan class=\"portal-text-title\"\u003eProvider\u003c/span\u003e\u003c/div\u003e\n\u003ca href=\"/notes/0aidQMXuED5nPrEAqPSwg\" class=\"portal-arrow\"\u003eGo to text \u003cspan class=\"right-arrow\"\u003e→\u003c/span\u003e\u003c/a\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\"\u003e\n\u003cdiv class=\"portal-parent-fader-top\"\u003e\u003c/div\u003e\n\u003cdiv class=\"portal-parent-fader-bottom\"\u003e\u003c/div\u003e\u003cp\u003eA provider is a connection that allows Terraform to manage infrastructure using an interface (e.g. AWS API)\u003c/p\u003e\n\u003c/div\u003e\u003c/div\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\n\u003ch3 id=\"resource\"\u003eResource\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#resource\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cdiv class=\"portal-container\"\u003e\n\u003cdiv class=\"portal-head\"\u003e\n\u003cdiv class=\"portal-backlink\"\u003e\n\u003cdiv class=\"portal-title\"\u003eFrom \u003cspan class=\"portal-text-title\"\u003eResource\u003c/span\u003e\u003c/div\u003e\n\u003ca href=\"/notes/Nt5U2FxZNGStbEcYYBjKE\" class=\"portal-arrow\"\u003eGo to text \u003cspan class=\"right-arrow\"\u003e→\u003c/span\u003e\u003c/a\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\"\u003e\n\u003cdiv class=\"portal-parent-fader-top\"\u003e\u003c/div\u003e\n\u003cdiv class=\"portal-parent-fader-bottom\"\u003e\u003c/div\u003e\u003cp\u003eA resource represents a piece of real world infrastructure \u003c/p\u003e\n\u003cp\u003eExamples:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ean S3 bucket\u003c/li\u003e\n\u003cli\u003ean EKS (Elastic Kubernetes) cluster\u003c/li\u003e\n\u003cli\u003ea Postgres \u003ca href=\"/notes/WRqfLQI6kPDa2M8aIurYo\"\u003erole\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\u003c/div\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\n\u003ch3 id=\"module\"\u003eModule\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#module\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cdiv class=\"portal-container\"\u003e\n\u003cdiv class=\"portal-head\"\u003e\n\u003cdiv class=\"portal-backlink\"\u003e\n\u003cdiv class=\"portal-title\"\u003eFrom \u003cspan class=\"portal-text-title\"\u003eModule\u003c/span\u003e\u003c/div\u003e\n\u003ca href=\"/notes/zSuIFLNNKKEtLtwhe8nez\" class=\"portal-arrow\"\u003eGo to text \u003cspan class=\"right-arrow\"\u003e→\u003c/span\u003e\u003c/a\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\"\u003e\n\u003cdiv class=\"portal-parent-fader-top\"\u003e\u003c/div\u003e\n\u003cdiv class=\"portal-parent-fader-bottom\"\u003e\u003c/div\u003e\u003cp\u003eA Terraform module is a set of Terraform configuration files in a single directory that can be considered its own standalone Terraform project.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eit can therefore...\n\u003cul\u003e\n\u003cli\u003econtain its own resources, data sources, locals, etc.\u003c/li\u003e\n\u003cli\u003etake variables (ie. inputs on a per-module basis)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\u003c/div\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\n\u003ch3 id=\"data-source\"\u003eData source\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#data-source\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cdiv class=\"portal-container\"\u003e\n\u003cdiv class=\"portal-head\"\u003e\n\u003cdiv class=\"portal-backlink\"\u003e\n\u003cdiv class=\"portal-title\"\u003eFrom \u003cspan class=\"portal-text-title\"\u003eData Source\u003c/span\u003e\u003c/div\u003e\n\u003ca href=\"/notes/mO2rzcwfMls7YDt3r3iGX\" class=\"portal-arrow\"\u003eGo to text \u003cspan class=\"right-arrow\"\u003e→\u003c/span\u003e\u003c/a\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\"\u003e\n\u003cdiv class=\"portal-parent-fader-top\"\u003e\u003c/div\u003e\n\u003cdiv class=\"portal-parent-fader-bottom\"\u003e\u003c/div\u003e\u003cp\u003eA data source is used to fetch data from a resource that is not managed by the current Terraform project.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ethink of it as a read-only resource that already exists\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\u003c/div\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\n\u003ch3 id=\"local\"\u003eLocal\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#local\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eA \u003ccode\u003elocal\u003c/code\u003e is Terraform's representation of a variable.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003enote: not to be confused with Terraform variables.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"variable\"\u003eVariable\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#variable\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cdiv class=\"portal-container\"\u003e\n\u003cdiv class=\"portal-head\"\u003e\n\u003cdiv class=\"portal-backlink\"\u003e\n\u003cdiv class=\"portal-title\"\u003eFrom \u003cspan class=\"portal-text-title\"\u003eVariables\u003c/span\u003e\u003c/div\u003e\n\u003ca href=\"/notes/456RSqs23EDalVWwggIy1\" class=\"portal-arrow\"\u003eGo to text \u003cspan class=\"right-arrow\"\u003e→\u003c/span\u003e\u003c/a\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\"\u003e\n\u003cdiv class=\"portal-parent-fader-top\"\u003e\u003c/div\u003e\n\u003cdiv class=\"portal-parent-fader-bottom\"\u003e\u003c/div\u003e\u003cp\u003eA variable is set at runtime, allowing us to vary Terraform's behaviour. \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTherefore, if Terraform were a function, a variable would be an input to the function.\u003c/li\u003e\n\u003cli\u003enote: not to be confused with \u003ccode\u003elocals\u003c/code\u003e, which themselves are actually more like variables as used in general programming\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-hcl\"\u003e\u003ccode class=\"language-hcl\"\u003e\u003cspan class=\"token keyword\"\u003evariable\u003cspan class=\"token type variable\"\u003e \"bucket_name\" \u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003etype\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e string\n    \u003cspan class=\"token comment\"\u003e# describe what this variable is used for\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003edescription\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"the name of the bucket we are creating\"\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003edefault\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"default_bucket_name\"\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eresource \u003cspan class=\"token type variable\"\u003e\"aws_s3_bucket\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"bucket\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003ebucket\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e var.bucket_name\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eVariables can be more complex too:\u003c/p\u003e\n\u003cpre class=\"language-tfvars\"\u003e\u003ccode class=\"language-tfvars\"\u003einstance_map = {\n    dev = \"t3.small\"\n    test = \"t3.medium\"\n    prod = \"t3.large\"\n}\n\nenvironment_type = \"dev\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd referenced like:\u003c/p\u003e\n\u003cpre class=\"language-hcl\"\u003e\u003ccode class=\"language-hcl\"\u003e\u003cspan class=\"token keyword\"\u003evariable\u003cspan class=\"token type variable\"\u003e \"instance_map\" \u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003etype\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e map(string)\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evariable\u003cspan class=\"token type variable\"\u003e \"environment_type\" \u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eoutput\u003cspan class=\"token type variable\"\u003e \"selected_instance\" \u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003evalue\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e var.instance_map\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003evar.environment_type\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"types\"\u003eTypes\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#types\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003estring\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebool\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003enumber\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elist(\u0026#x3C;TYPE\u003e)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eset(\u0026#x3C;TYPE\u003e)\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003eeach value is unique\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emap(\u0026#x3C;TYPE\u003e)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eobject()\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003elike a map, but values can be different types\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etuple([\u0026#x3C;TYPE\u003e, …])\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003enumber of values and order is preserved\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eany\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003eunlike \u003ccode\u003eany\u003c/code\u003e type from \u003ca href=\"/notes/S2sBltrPfd8a7ICuD7CuH\"\u003eTypescript\u003c/a\u003e; this \u003ccode\u003eany\u003c/code\u003e allows Terraform to infer based on the actual value.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"providing-variables-4-ways\"\u003eProviding variables (4 ways)\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#providing-variables-4-ways\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eWhen we run \u003ccode\u003eterraform init\u003c/code\u003e and \u003ccode\u003eterraform apply\u003c/code\u003e, we will be prompted to provide a value for the variable(s).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003epass the value with:\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003eterraform apply -var bucket_name=my_bucket\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e\u003ccode\u003eexport\u003c/code\u003e environment variables in the terminal prefixed with \u003ccode\u003eTF_VAR_\u003c/code\u003e:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003eexport TF_VAR_bucket_name=my_bucket\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"4\"\u003e\n\u003cli\u003ecreate a \u003ccode\u003eterraform.tfvars\u003c/code\u003e file (or \u003ccode\u003e\u0026#x3C;ANYNAME\u003e.auto.tfvars\u003c/code\u003e):\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre class=\"language-tfvars\"\u003e\u003ccode class=\"language-tfvars\"\u003ebucket_name = \"my_bucket\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\n\u003ch3 id=\"state\"\u003eState\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#state\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cdiv class=\"portal-container\"\u003e\n\u003cdiv class=\"portal-head\"\u003e\n\u003cdiv class=\"portal-backlink\"\u003e\n\u003cdiv class=\"portal-title\"\u003eFrom \u003cspan class=\"portal-text-title\"\u003eState\u003c/span\u003e\u003c/div\u003e\n\u003ca href=\"/notes/NsY5hHUmyMhwB61BfihyD\" class=\"portal-arrow\"\u003eGo to text \u003cspan class=\"right-arrow\"\u003e→\u003c/span\u003e\u003c/a\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\"\u003e\n\u003cdiv class=\"portal-parent-fader-top\"\u003e\u003c/div\u003e\n\u003cdiv class=\"portal-parent-fader-bottom\"\u003e\u003c/div\u003e\u003cp\u003eState is the place where Terraform stores of all of the resources (and their metadata) it has created.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003erun \u003ccode\u003eterraform state list\u003c/code\u003e to see all resources existing in state.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis state is used by Terraform to work out how changes need to be made.\u003c/p\u003e\n\u003cp\u003eState is stored in \u003ccode\u003eterraform.tfstate\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eIf we want to move resource creation from one project to another, state needs to be manipulated directly \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ethis can be handled by (example uses a AWS VPC resource)\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003erunning \u003ccode\u003eterraform state rm aws_vpc.my_vpc\u003c/code\u003e command, which will remove the resource from state (so Terraform is no longer managing it), but will not delete the resource in the cloud.\u003c/li\u003e\n\u003cli\u003ein the new project, copy+paste over the resource and run \u003ccode\u003eterraform import aws_vpc.my_pc \u0026#x3C;VPC_ID\u003e\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003erun \u003ccode\u003eterraform apply\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003esome resources do not support \u003ccode\u003eimport\u003c/code\u003e. In this case, use \u003ccode\u003eterraform state mv\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"remote-state\"\u003eRemote state\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#remote-state\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eMultiple people working on the same Terraform project can introduce a lot of complexity, since a local state file is used to store a record of what has been created. If we run terraform commands on a second machine, it will try to create double the resources.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eto get around this issue, we can store state in a remote location (e.g. in an S3 bucket)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eWe specify the remote state location using the \u003ccode\u003ebackend\u003c/code\u003e keyword. Here we are using an S3 bucket:\u003c/p\u003e\n\u003cpre class=\"language-tf\"\u003e\u003ccode class=\"language-tf\"\u003e# state.tf\nbackend \"s3\" {\n    bucket = \"\u0026#x3C;bucket-name\u003e\"\n    key = \"my-project.state\"\n    region = \"us-west-1\"\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe remote state backend needs to support \"locking\", which prevents changes to the state while Terraform commands are running.\u003c/p\u003e\n\u003cp\u003eA good idea is to use S3 bucket versioning so we can time travel through different Terraform states.\u003c/p\u003e\u003c/div\u003e\u003c/div\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\n\u003ch3 id=\"workspaces\"\u003eWorkspaces\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#workspaces\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eWorkspaces solve the problem \"how do we create multiple environments using the same code?\"\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eterraform.workspace\u003c/code\u003e is a special variable that resolves to the current workspace we are running in.\u003c/p\u003e\n\u003cp\u003eUnless we explicitly specify, we are running in the \u003ccode\u003edefault\u003c/code\u003e workspace.\u003c/p\u003e\n\u003cp\u003eLocal workspaces are stored in \u003ccode\u003eterraform.tfstate.d/\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eeach workspace has its own state\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"cli\"\u003eCLI\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#cli\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eList workspaces -  \u003ccode\u003eterraform workspaces list\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eCreate new workspace - \u003ccode\u003eterraform workspace new development\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eSwitch workspaces - \u003ccode\u003eterraform workspace select development\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"terraform-cloud\"\u003eTerraform Cloud\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#terraform-cloud\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eTerraform cloud provides us with a method to change our input variables at the top level, meaning each set of infra (for each environment) can have its own set of variables.\u003c/p\u003e\n\u003cp\u003eWith it, we:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003ecreate a workspace \u003c/li\u003e\n\u003cli\u003epoint it at a source control repo containing your Terraform code\u003c/li\u003e\n\u003cli\u003eset the variables for that workspace\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"lifecycle\"\u003eLifecycle\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#lifecycle\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eEach resource has a special attribute block called \u003ccode\u003elifecycle\u003c/code\u003e that gives us extra control.\u003c/p\u003e\n\u003cp\u003eIt allows us to:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ecreate_before_destroy\u003c/code\u003e, to ensure a new resource is created prior to deleting the old one\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eprevent_destroy\u003c/code\u003e, to prevent Terraform from ever deleting the resource, so long as the property exists\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-tf\"\u003e\u003ccode class=\"language-tf\"\u003elifecycle {\n  prevent_destroy = true\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"provisioner\"\u003eProvisioner\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#provisioner\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eProvisioners allow us to run a script (remotely or locally) after a resource has been created.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eprovisioners allow us to step in and solve problems ourselves when they are not solved out of the box by the provider we are using.\u003c/li\u003e\n\u003cli\u003ebecause provisioners are imperative, they are seen as a last resort approach to solving our problem.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"misc\"\u003eMisc\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#misc\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch3 id=\"multi-line-string\"\u003eMulti-line string\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#multi-line-string\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eMulti-line strings are declared between \u003ccode\u003e\u0026#x3C;\u0026#x3C;ANYWORD\u003c/code\u003e and \u003ccode\u003eANYWORD\u003c/code\u003e:\u003c/p\u003e\n\u003cpre class=\"language-tf\"\u003e\u003ccode class=\"language-tf\"\u003eresource \"aws_iam_policy\" \"my_bucket_policy\" {\n    name = \"my-bucket-policy\"\n\n    policy = \u0026#x3C;\u0026#x3C;POLICY\n    {\n        \"Version\": \"2012-10-17\",\n        \"Statement\": [\n            {\n                \"Action\": [\n                    \"s3:ListBucket\"\n                ],\n                \"Effect\": \"Allow\",\n                \"Resource\": [\n                    \"${data.aws_s3_bucket.bucket.arn}\"\n                ]\n            }\n        ]\n    }\n    POLICY\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eString interpolation (\u003ccode\u003e${interpolated_value}\u003c/code\u003e) can be used inside a multi-line string.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eonly needed when inside quotes (\u003ccode\u003e\"\"\u003c/code\u003e)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"outputting-to-console-stdout\"\u003eOutputting to console (stdout)\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#outputting-to-console-stdout\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"language-tf\"\u003e\u003ccode class=\"language-tf\"\u003eoutput \"message\" {\n    value = aws_s3_bucket.my_bucket.id\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eor we can print all attributes exported by a resource:\u003c/p\u003e\n\u003cpre class=\"language-tf\"\u003e\u003ccode class=\"language-tf\"\u003eoutput \"all\" {\n    aws_s3_bucket.my_bucket\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"folder-structure\"\u003eFolder structure\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#folder-structure\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eAll Terraform files should be in a single directory (the Terraform project) at the top level. Any files within subdirectories will be ignored. Conceptually, when we run Terraform commands, everything will be appended into a single file anyway.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003echild directories are used to set up Modules\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eBy convention,\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eset up providers in \u003ccode\u003emain.tf\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eresources named after their type (e.g. \u003ccode\u003esqs.tf\u003c/code\u003e, \u003ccode\u003eapi-gateway.tf\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003evariables in \u003ccode\u003evariables.tf\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"tools\"\u003eTools\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#tools\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.runatlantis.io/\"\u003eAtlantis\u003c/a\u003e - Pull Request automation for Terraform\n\u003cul\u003e\n\u003cli\u003epurpose is to have improved code review for infra changes.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eTerratest - a unit testing framework for Terraform\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"alternatives\"\u003eAlternatives\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#alternatives\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eChef/Puppet - these are configuration management tools. They are designed to configure and manage the already existing infrastructure, while Terraform is designed to set up the infrastructre itself.\n\u003cul\u003e\n\u003cli\u003eIn other words, Puppet and Chef would be used to configure servers, while Terraform would be used to create the server itself.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ePulumi - This IaC tool uses a programming language (like Typescript) instead of a configuration language.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cstrong\u003eChildren\u003c/strong\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"/notes/mO2rzcwfMls7YDt3r3iGX\"\u003eData Source\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/zSuIFLNNKKEtLtwhe8nez\"\u003eModule\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/0aidQMXuED5nPrEAqPSwg\"\u003eProvider\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/Nt5U2FxZNGStbEcYYBjKE\"\u003eResource\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/NsY5hHUmyMhwB61BfihyD\"\u003eState\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/Ky3O7oxftnwQbcZlZ0nEe\"\u003eTerraform CLI\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/C84fC8TYNY902iA8f7nCD\"\u003eTerragrunt\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/456RSqs23EDalVWwggIy1\"\u003eVariables\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003chr\u003e\n\u003cstrong\u003eBacklinks\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/KutlqQVGLBAdLTslz3D9A\"\u003eCDK\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/7Hd68M5niADEkip4CdU85\"\u003eIaC (Infrastructure-as-Code)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/C84fC8TYNY902iA8f7nCD\"\u003eTerragrunt\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/NbGOJJpZuEbf0hXs2UvAB\"\u003eCloudFormation\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/OSdV9FvBG3wDbRNLllg0V\"\u003eAWS Lambda\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/tn4qi4x8bodysdvtd5rq0f4\"\u003eSAM\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/begrl6j3rxln3bcsz87ornn\"\u003eXray\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/lBasXzi1eHzGwL2pEuOv8\"\u003eGitOps\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","noteIndex":{"id":"olZIVfSs2uLLr3BppFh4K","title":"Digital Garden","desc":"","updated":1674517603573,"created":1615482407722,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"../main/tech","name":"tech"},"contentHash":"effb007003ca6a91d7fd0c293e1d2436","links":[{"type":"wiki","from":{"fname":"root","id":"olZIVfSs2uLLr3BppFh4K","vaultName":"tech"},"value":"testing.method.unit","alias":"unit testing","position":{"start":{"line":18,"column":121,"offset":1146},"end":{"line":18,"column":157,"offset":1182},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"testing.method.unit"}},{"type":"wiki","from":{"fname":"root","id":"olZIVfSs2uLLr3BppFh4K","vaultName":"tech"},"value":"general.arch.microservice","alias":"microservices","position":{"start":{"line":18,"column":188,"offset":1213},"end":{"line":18,"column":231,"offset":1256},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"general.arch.microservice"}},{"type":"wiki","from":{"fname":"root","id":"olZIVfSs2uLLr3BppFh4K","vaultName":"tech"},"value":"paradigm.oop","alias":"OOP","position":{"start":{"line":36,"column":227,"offset":2718},"end":{"line":36,"column":247,"offset":2738},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"paradigm.oop"}}],"anchors":{"tags":{"type":"header","text":"Tags","value":"tags","line":46,"column":0,"depth":3},"resources":{"type":"header","text":"Resources","value":"resources","line":55,"column":0,"depth":2},"ue-unexamined-resources":{"type":"header","text":"UE (Unexamined) Resources","value":"ue-unexamined-resources","line":56,"column":0,"depth":3},"e-examined-resources":{"type":"header","text":"E (Examined) Resources","value":"e-examined-resources","line":59,"column":0,"depth":3},"resources-1":{"type":"header","text":"Resources","value":"resources-1","line":62,"column":0,"depth":3}},"children":["40ubf88tephzbdjte8cdsa0","zFMjbn3xihVNHjUIdZCD1","IK6NOKemuDjhfstJBovKL","ZaTr28eWk1DrXOEsc1YVb","Vi0WYVLZunVM9iR8XZJn3","ngAbg7gluvbt1bY1UIRsi","RCPPXSakm5TvKka8kOmVp","LIcuGYV0DDt1VWbvH6Sed","MPx8ykTP57I40WTZvTP7f","ZU5WmdTG1bHoE8RcmZXZG","jqWiyYJff92RjXuUQt9PQ","KihijM8OQvZ4pASkkhqzL","F9vyqvls3OBCujtukqKhy","k6jxm2b3edgkhbordpuz6v1","facc2b01-755a-409f-99f6-57bef2d1501f","bZumdyapJ2H0wWWOmJ45i","elqpgoe2r951si4xrhujppj","m5ov42Vm6mR7RQWTvl1NW","cw8cerc0cos8lh871oz8rtf","PZxxZ4iESzSlbbHJKxuAZ","UDu62Pa6BaRqlG8uGoMhy","u3zcndycwqessho5h6x0nz9","ZgCUp366YrF2Tyky2NT73","DVpVUmavSoVDA7UIlPzLX","nMCtMXVvjBsJk3iw1zoIO","ANfx9Z4a6ZA0uJuSHtbIJ","BkG557LKUYbH1DnxprEVT","1TaH8zDTM98FZ9SYaeXLM","02v7ymc144e5c4pv3edkud7","dc79799f-a55d-48ab-a8be-c48adb1b19c0","f6feef57-b8f5-451f-a09a-7b63f6a07183","4sz47Y0LKs1Si73rWtyyh","g7ulqi8no93ezeocbesc3ll","5a9fb1df-478e-4687-9be0-5cb97e61ec57","1374e9e9-1cbc-4e1f-b1ca-66b8569533dd","D8Z3rjXkSj2EOymXQXF4Z","np3c1ykvnjqv5xoombpfwqz","f529cc34-aba0-45ca-ad7e-02ddda318941","0zcauha3il2NqtxZazIo7","9bbd6f68-03b2-41f4-92e4-2ca313e8b450","5a2ab598-fa7e-4471-8bda-9f5831b679ae","uV6w4mZPoohWyZV4Xaad0","QHXEIyeZGIGMVi5Q52UWI","RgE0mZLaUjPftFPZsiAoe","mytCOts26Pidush65tdRW","fwUzxfLSPMH1eL8oBoLWx","wazdsda6h25x66edvfmeuiv","TbW7PM9bg1y5TGkiWwQ8b","xiSIDeEtIc8X0lpUQlppI","0jxgntiLNHWFuCbzqtFGF","GkdMprLUe4QQULBxmGN6V","4SYc6v5hxY5g6Ip6kjpwO","czi7ilt2i1uoqm1f2otbntj","fqVQpS9FBiXgKsZX3R3sJ","L5JUZlGAGvTxrsEBB7DY8","ttyri4pwfyn5lcx0vp9804o","TeTedoeS2LdHPR632eCpM","ulicRRwo3lSFzh3tMfWH9","p7d24vyb8m00ombzn34t50c","e65188a1-177e-4ab2-99f9-75f85d537621","fajYnbVhCRDi74xn0H30R","bArGdGwqo3iFkyKMyE7qR","4Dcp7gbEVoLLgfu7bXFai","5d700782-fb81-416e-83f9-5dd88260e350","zubgzhNFE6KlTgXcjTz6O","8lpdfWa0cbSq1XJQbcYcY","2psluywdc416t7vrql0m058","17I8ZksXvqCH1mRtZDjHp","kF916Ow84qpJJeMRkWMIo","tMLkLcrIHHBz56xVmBLkP","CSePBQ6q7qhowKESqVwt7","laZ4OfLhZNK1Kuy6GaWUr","z5IJblOknQhMzZ5QZh4ye","N36FHxfxzwJfxDY3miWyX","3bb25f58-2b50-4fa3-af55-48ea9f88a081","7x07qjgbitozdfszqzuy7ix","u93Rz4fEWGu6VBR30Zraf","9hjMHnKvYT4jLKvuDSXaV","qC5GxCZBmNb4Ip6c0kU8x","LgW7mTIALODoXc54B3p6S","UYPxfHBFWX7fb6hHU5bB6","74lYtC8NKpCzcyFOZTfR1","sEoBNAEuaTxwSmTXDonZt","dj0jr9mpvs62e2pkg3zc3yy","z8ie0xjogb6ht7gzowav5xr","qxSOd6SPN8qf9ZUojVFDX","WQoMTf6VXBaxCgksXAVsj","2Mw4XgfyCHXHNOX5yoCIY","qcdt2f7jo51muquo5r95dpo","0XJqmcdtcMZu66glBI5O8","lK8r8BXS4ThiUTe4xKIZe","93de42ca-53ea-460a-baa7-b9ec5c47cb1e","Rxs2jaGpdFzqYtP7lAJFJ","aO8W81Z0PyIb6Hs7nOHPW","lhzisalkebu4w5n01np07i0","7b5l4b6fi65n7sv9org5q1l","I01hENHnh8Tqu3Ok8sLzG","03o3n0hz9v9jtb7j889zpd4","evqsPNutOaZ8hcBCqxFQu","zhhxcjZUHdU8uRLwGb9Zh","G1aFACZB2ooWGMGwyd3ZW","YWy1C4tgoaCcw1m8JJsr7","Szj3o5iaNxPpesiCqwrbu","613syb18hb3v0u1ydvor7ru","XhvCDW3fIw6h6MhY5ticq","Q70g7SusFZBQXzkuQifv4","AzfWDH3wp7jFpL2EYxBcW","y0fwpZ9qMqirsLiFyOciU","ZF8xj8wwDUqKlrwTrCFZ1","tAJvhqhdfyZZa87QHq1TU","4hRmipi8lxpBLyzWu5JVB","iTg0C7QjvnmqBZeEigJNs","3babc3d2-79ae-470a-9c06-ab8bba2e684e","bF3UsMFya3fMeXWDspVov","ULkfbL9WpktbVYnzhl6Jw","PpNOO8JYWe6dM8wruSa7x","di40pCxDn7IiqE8lFdD46","rmW0mkerqV35I8QPji6lM","3IFIK1ByzeIxZCByryGLN","iImkYAKfkw3beAl6pLbDn","ecDe8DNWrkeQTwpTEvHje","i2it5id8qwtg27n4usg8bo1","Yqhdd9mSJGN7OJOeyoSD2","Ws5tah8tpeyn9tK8VBTg8","gWAg15uBJgkS2B0wcpMAa","l7V3v2ep1YdDCt7DOr7Ci","yM2PJBdqJnHpD63cPA6sW","qn0bre7eLbi3QMbCfWkUi","fSu0KxFL41IRouotqmbHs","0gtg24Mj1a1bQFPRGQNlO","7iQPBMltLPLbFEz2qbjPu","yoh4pwoXcfELInGKRdYf6","dCGCWXgAmiOZXbdULT1m6","jMavlje07sNa6hSEIE8WA","Xxm0JE4dKHxrQAaZfzvxD","nRb6Im4Kcmc2ZWE7K1jZ1","PAEBZCyFBZJyR7OoMZ41E","PQ6km8RgRCuyICBPOYz8f","x5tm1nfjzyawwzedy3yitgd","2bhftt8rGuxYu4pFgNqru","hjYIZpHQWuXfeEoGeJEKW","K2M9bQqVq2eQfm29eslKL","X8obW1iKwYsvNgKWGyCzy","yJwSC7hqYIezTFHf5i0Ev","c4Z7ETcOHUILRMH32Sfjw","qiR6dIu857b9M9kTqjOyK","fc2coz74cnfy5czzofx4h5x","Ku1OgHMhELajzo61Gx7ye","LUrfhDWo8wuwZu7CN9TV8","osu6JGOnvXJ5gt3tpqWZY","1a6173cd-cf13-4b34-a522-8350bf9a364f","S2sBltrPfd8a7ICuD7CuH","GLQ2pmkJUNUa93THBDVsD","md6xitz4exia2joa06i490b","oWCuBXOg6JWfZzjmKxmNl","jOmhZ8ovLYTPbpM1vqSDx","p9bov84s0isgkl1ysaw93kk","FraC6xzLy1ei91l1ICyc9","6ceBas2RE9Q4787GDngH7","734cd78d-0bc9-426b-803d-1efc84dfffe5","k4Bb09px6r0FxIRs49SXV","oaG3H1S9IUBO644nGZigu","Ka7agQJkUMRSWN0uFdkWK","si3z090WsiLasMhJBa1Az","hs6rwzt4mogiicoc4gcykbi","ljKAVERmdEiKLK9hXGKBm","zxt3lhonfdhglvijd17ua8c","dd7dopve1dudqkoibkqvti4","923tgifqf59ovv5yldtyi0a","vrjwp01goqw47fqctm4f4lo","c99gdmmppju3r1tth8cb2jx","z2pvn5qxdz84zgygqzxage8"],"parent":null,"data":{},"body":"This Dendron vault of tech knowledge is organized according to domains and their sub-domains, along with specific implementation of those domains.\n\nFor instance, Git itself is a domain. Sub-domains of Git would include things like `commit`,\n`tags`, `reflog` etc. implementations of each of those could be `cli`, `strat`\n(strategies), `inner`, and so on.\n\nThe goal of the wiki is to present data in a manner that is from the perspective\nof a querying user. Here, a user is a programmer wanting to get key information\nfrom a specific domain. For instance, if a user wants to use postgres functions\nand hasn't done them in a while, they should be able to query\n`postgres.functions` to see what information is available to them.\n\nThis wiki has been written with myself in mind. While learning each of these\ndomains, I have been sensitive to the \"aha\" moments and have noted down my\ninsights as they arose. I have refrained from capturing information that I\nconsidered obvious or otherwise non-beneficial to my own understanding.\n\nAs a result, I have allowed myself to use potentially arcane concepts to explain other ones. For example, in my note on [[unit testing|testing.method.unit]], I have made reference to the [[microservices|general.arch.microservice]] note. If these notes were made with the public in mind, this would be a very bad strategy, given that you'd have to understand microservices to be able to draw that same parallel that I've already drawn. Since these notes are written for myself, I have been fine with taking these liberties.\n\nWhat I hope to gain from this wiki is the ability to step away from any\ngiven domain for a long period of time, and be able to be passably useful for\nwhatever my goals are within a short period of time. Of course this is all\nvague sounding, and really depends on the domain along with the ends I am\ntrying to reach.\n\nTo achieve this, the system should be steadfast to:\n- be able to put information in relatively easily, without too much thought\n\trequired to its location. While location is important, Dendron makes it easy\n\tto relocate notes, if it becomes apparent that a different place makes more\n\tsense.\n- be able to extract the information that is needed, meaning there is a\n\thigh-degree in confidence in the location of the information. The idea is\n\tthat information loses a large amount of its value when it is unfindable.\n\tTherefore, a relatively strict ideology should be used when determining\n\twhere a piece of information belongs.\n\t- Some concepts might realistically belong to multiple domains. For instance, the concept of *access modifiers* can be found in both `C#` and `Typescript`. Therefore, this note should be abstracted to a common place, such as [[OOP|paradigm.oop]].\n\nThis Dendron vault is the sister component to the [General Second Brain](https://tech.kyletycholiz.com).\n\n### Tags\nThroughout the garden, I have made use of tags, which give semantic meaning to the pieces of information.\n\n- `ex.` - Denotes an *example* of the preceding piece of information\n- `spec:` - Specifies that the preceding information has some degree of *speculation* to it, and may not be 100% factual. Ideally this gets clarified over time as my understanding develops.\n- `anal:` - Denotes an *analogy* of the preceding information. Often I will attempt to link concepts to others that I have previously learned.\n- `mn:` - Denotes a *mnemonic*\n- `expl:` - Denotes an *explanation*\n\n## Resources\n### UE (Unexamined) Resources\nOften, I come across sources of information that I believe to be high-quality. They may be recommendations or found in some other way. No matter their origin, I may be in a position where I don't have the time to fully examine them (and properly extract notes), or I may not require the information at that moment in time. In cases like these, I will add reference to a section of the note called **UE Resources**. The idea is that in the future when I am ready to examine them, I have a list of resources that I can start with. This is an alternative strategy to compiling browser bookmarks, which I've found can quickly become untenable.\n\n### E (Examined) Resources\nOnce a resource has been thoroughly examined and has been mined for notes, it will be moved from *UE Resources* to *E Resources*. This is to indicate that (in my own estimation), there is nothing more to be gained from the resource that is not already in the note.\n\n### Resources\nThis heading is for inexhaustible resources. \n- A prime example would be a quality website that continually posts articles.  - Another example would be a tool, such as software that measures frequencies in a room to help acoustically treat it.\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"dendronVersion":"0.83.0","vaults":[{"fsPath":"../main/tech","name":"tech"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"enableEditorDecorations":true,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"The Tech Digital Garden of Kyle Tycholiz"},"github":{"cname":"tech.kyletycholiz.com","enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"master","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","enableMermaid":true,"siteUrl":"https://tech.kyletycholiz.com","duplicateNoteBehavior":{"action":"useVault","payload":["tech"]},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"Ku1OgHMhELajzo61Gx7ye"},"buildId":"fo6gubzKP_KV9RZPhaoiQ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>